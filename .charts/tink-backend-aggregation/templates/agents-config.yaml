{{- $agentsConfig := .Values.agents | default dict }}
{{- $tppSecretsServiceConfig := .Values.tppSecretsServiceConfiguration | default dict }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: agents-config
  namespace: aggregation
data:
  config.yml: |
    agentsServiceConfiguration:
      excludedDebugClusters:
        excludedClusters:
          - local-development

      {{- if $agentsConfig.mountSignatureKeyPair }}
      signatureKeyPair:
        privateKeyPath: "/etc/tink-signature-key/private_rsa_key.pem"
        publicKeyPath: "/etc/tink-signature-key/public_rsa_key.pem"
      {{- end }}

      eidasProxy:
        host: https://tink-integration-eidas-proxy.eidas-proxy.svc.cluster.local:9022
        caPath: /etc/client-certificate/ca.crt
        tlsCrtPath: /etc/client-certificate/tls.crt
        tlsKeyPath: /etc/client-certificate/tls.key

      {{- if .Values.agentDataAvailabilityTrackerAvailable }}
      agentDataAvailabilityTrackerConfiguration:
        host: agent-data-availability-tracker.agent-data-availability-tracker.svc.cluster.local
        port: 443
      {{- end }}

      {{- if $tppSecretsServiceConfig }}
      tppSecretsServiceConfiguration:
        host: tink-integration-eidas-secrets-service.eidas-secrets-service.svc.cluster.local
        port: 444
        caPath: "/etc/client-certificate/ca.crt"
        tlsCrtPath: "/etc/client-certificate/tls.crt"
        tlsKeyPath: "/etc/client-certificate/tls.key"
        certificatesLocation: {{ $tppSecretsServiceConfig.certificatesLocation }}
        enabled: {{ $tppSecretsServiceConfig.enabled }}
      {{- end }}

      {{- if $agentsConfig.mountCallbackJwtSignaturePair }}
      callbackJwtSignatureKeyPair:
        privateKeyPath: "/etc/tink-callback-jwt-signature-pair/private_ec_key.pem"
        publicKeyPath: "/etc/tink-callback-jwt-signature-pair/public_ec_key.pem"
        isEnabled: {{ $agentsConfig.callbackJwtSignatureKeyPairEnabled | default false }}
      {{- end }}

      creditsafe:
        username: CREDITSAFE_USERNAME
        password: CREDITSAFE_PASSWORD
        logConsumerMonitoringTraffic: true

      aggregationWorker:
        {{- if .Values.debugLogFrequencyPercent }}
          debugLogFrequencyPercent: {{ .Values.debugLogFrequencyPercent }}
        {{- end }}
        {{- if $agentsConfig.collectorSubscriptionKey }}
          collectorSubscriptionKey: COLLECTOR_SUBSCRIPTION_KEY
        {{- end }}

      integrations:
        {{- if $agentsConfig.sbab }}
        sbab:
          signBaseUrl: https://secure.sbab.se
          tink:
            eidasCertId: "{{ $agentsConfig.sbab.tink.eidasCertId }}"
            redirectUrl: "{{ $agentsConfig.sbab.tink.redirectUrl }}"
        {{- end }}

        ukOpenBankingJson: |
          UKOPENBANKINGJSON

        {{- if $agentsConfig.proxyUri }}
        proxyUri: "{{ $agentsConfig.proxyUri }}"
        {{- end }}

        {{- if $agentsConfig.proxyUris }}
        proxyUris:
        {{- range $uri := $agentsConfig.proxyUris }}
          - "{{ $uri }}"
        {{- end }}
        {{- end }}

        {{- if $agentsConfig.nordea }}
        nordea:
          tink:
            clientId: "NORDEA_CLIENT_ID"
            clientSecret: "NORDEA_CLIENT_SECRET"
            redirectUrl: "{{ $agentsConfig.nordea.tink.redirectUrl }}"
            eidasQwac: "{{ $agentsConfig.nordea.tink.eidasQwac }}"
        {{- end }}


        {{- if $agentsConfig.belfius }}
        belfius:
          tink:
            clientId: "BELFIUS_CLIENT_ID_TAG"
            clientSecret: "BELFIUS_CLIENT_SECRET_TAG"
            redirectUrl: "{{ $agentsConfig.belfius.tink.redirectUrl }}"
            baseUrl: "{{ $agentsConfig.belfius.tink.baseUrl }}"
            certificateId: "{{ $agentsConfig.belfius.tink.certificateId }}"
        {{- end }}

        {{- if $agentsConfig.icabanken }}
        icabanken:
          tink:
            clientId: "{{ $agentsConfig.icabanken.tink.clientId }}"
            redirectUrl: "{{ $agentsConfig.icabanken.tink.redirectUrl }}"
            certificateId: "{{ $agentsConfig.icabanken.tink.certificateId }}"
        {{- end }}

        {{- if $agentsConfig.seb }}
        seb:
          tink:
            clientId: "SEB_CLIENT_ID"
            clientSecret: "SEB_CLIENT_SECRET"
            redirectUrl: "{{ $agentsConfig.seb.tink.redirectUrl }}"
            eidasQwac: "{{ $agentsConfig.seb.tink.eidasQwac }}"
        {{- end }}

        {{- if $agentsConfig.axa }}
        axa:
          tink:
            clientId: "AXA_PSD2_CLIENT_ID"
            redirectUrl: "{{ $agentsConfig.axa.tink.redirectUrl }}"
            certificateId: "{{ $agentsConfig.axa.tink.certificateId }}"
            baseUrl: "https://api-dailybanking.axabank.be"
        {{- end }}

        {{- if $agentsConfig.bankdata }}
        bankdata:
          tink:
            clientId: "BANKDATA_CLIENT_ID"
            apiKey: "BANKDATA_API_KEY"
            redirectUrl: "{{ $agentsConfig.bankdata.tink.redirectUrl }}"
        {{- end }}

        {{- if $agentsConfig.bpost }}
        bpost:
          tink:
            clientId: "BPOST_PSD2_CLIENT_ID"
            redirectUrl: "{{ $agentsConfig.bpost.tink.redirectUrl }}"
            certificateId: "{{ $agentsConfig.bpost.tink.certificateId }}"
            baseUrl: "https://api.psd2.bpostbank.be"
        {{- end }}

        {{- if $agentsConfig.crelan }}
        crelan:
          tink:
            clientId: "CRELAN_PSD2_CLIENT_ID"
            redirectUrl: "{{ $agentsConfig.crelan.tink.redirectUrl }}"
            certificateId: "{{ $agentsConfig.crelan.tink.certificateId }}"
            baseUrl: "https://api.crelan.be"
        {{- end }}

        {{- if $agentsConfig.sparebank }}
        sparebank:
          tink:
            qwacCertId: "{{ $agentsConfig.sparebank.tink.qwacCertId }}"
            qsealcCertId: "{{ $agentsConfig.sparebank.tink.qsealcCertId }}"
            certificate: "SPAREBANK_CERTIFICATE"
            keyId: "SPAREBANK_KEY_ID"
            redirectUrl: "{{ $agentsConfig.sparebank.tink.redirectUrl }}"
            tppId: "SPAREBANK_TPP_ID"
        {{- end }}

        {{- if $agentsConfig.monzo }}
        monzo:
          tink:
            clientId: "MONZO_CLIENT_ID"
            clientSecret: "MONZO_CLIENT_SECRET"
            redirectUrl: "{{ $agentsConfig.monzo.redirectUrl }}"
        {{- end }}

        {{- if $agentsConfig.starling }}
        starling:
          tink:
            aisConfiguration:
              clientId: "STARLING_AIS_CLIENT_ID"
              clientSecret: "STARLING_AIS_CLIENT_SECRET"
            pisConfiguration:
              clientId: "STARLING_PIS_CLIENT_ID"
              clientSecret: "STARLING_PIS_CLIENT_SECRET"
            keyUid: "STARLING_SIGNING_KEY_UID"
            signingKey: "STARLING_SIGNING_KEY"
            redirectUrl: "{{ $agentsConfig.starling.redirectUrl }}"
        {{- end }}

        {{- if $agentsConfig.volksbank }}
        volksbank:
          tink:
            aisConfiguration:
              clientId: "VOLKSBANK_AIS_CLIENT_ID_TINK_TAG"
              clientSecret: "VOLKSBANK_AIS_CLIENT_SECRET_TINK_TAG"
              certificateId: "Tink"
            redirectUrl: "{{ $agentsConfig.volksbank.tink.redirectUrl }}"
          abn-staging:
            aisConfiguration:
              clientId: "VOLKSBANK_AIS_CLIENT_ID_ABN_TAG"
              clientSecret: "VOLKSBANK_AIS_CLIENT_SECRET_ABN_TAG"
              certificateId: "abnamro2"
            redirectUrl: "https://api.staging.abnamro.tinkapp.nl/api/v1/credentials/third-party/callback"
          abn:
            aisConfiguration:
              clientId: "VOLKSBANK_AIS_CLIENT_ID_ABN_TAG"
              clientSecret: "VOLKSBANK_AIS_CLIENT_SECRET_ABN_TAG"
              certificateId: "abnamro2"
            redirectUrl: "https://api.abnamro.tinkapp.nl/api/v1/credentials/third-party/callback"
        {{- end }}

        {{- if $agentsConfig.bec }}
        bec:
          tink:
            eidasQwac: "{{ $agentsConfig.bec.tink.eidasQwac }}"
            qSealc: "BEC_QSEALC"
            keyId: "BEC_KEY_ID"
            redirectUrl: "{{ $agentsConfig.bec.tink.redirectUrl }}"
        {{- end }}

        {{- if $agentsConfig.fints }}
        fints:
          regNumber: "FINTS_REG_NUMBER"
        {{- end }}

        {{- if $agentsConfig.bunq }}
        bunq:
          tink:
            clientId: "BUNQ_CLIENT_ID_TINK_TAG"
            clientSecret: "BUNQ_CLIENT_SECRET_TINK_TAG"
            psd2ApiKey: "BUNQ_PSD2_API_KEY_TINK_TAG"
            psd2ClientAuthToken: 'BUNQ_PSD2_CLIENT_AUTH_TOKEN_TINK_TAG'
            psd2InstallationKeyPair: 'BUNQ_PSD2_INSTALLATION_KEY_PAIR_TINK_TAG'
            redirectUrl: "{{ $agentsConfig.bunq.tink.redirectUrl }}"
          abn:
            clientId: "BUNQ_CLIENT_ID_ABN_TAG"
            clientSecret: "BUNQ_CLIENT_SECRET_ABN_TAG"
            psd2ApiKey: "BUNQ_PSD2_API_KEY_ABN_TAG"
            psd2ClientAuthToken: 'BUNQ_PSD2_CLIENT_AUTH_TOKEN_ABN_TAG'
            psd2InstallationKeyPair: 'BUNQ_PSD2_INSTALLATION_KEY_PAIR_ABN_TAG'
            redirectUrl: "{{ $agentsConfig.bunq.abn.redirectUrl }}"
        {{- end }}

        {{- if $agentsConfig.rabobank }}
        rabobank:
          tink-sandbox:
            clientId: "RABOBANK_CLIENT_ID_TINK_SANDBOX_TAG"
            clientSecret: "RABOBANK_CLIENT_SECRET_TINK_SANDBOX_TAG"
            redirectUrl: "{{ $agentsConfig.rabobank.tink_sandbox.redirectUrl }}"
            baseUrl: "https://api-sandbox.rabobank.nl/openapi/sandbox"
            clientSSLP12: "RABOBANK_CERTIFICATE_P12_TINK_SANDBOX_TAG"
            clientSSLKeyPassword: ""
            qsealcPem: "RABOBANK_QSEALC_TINK_TAG"
            certificateId: "{{ $agentsConfig.rabobank.tink.certificateId }}"
          tink:
            clientId: "RABOBANK_CLIENT_ID_TINK_TAG"
            clientSecret: "RABOBANK_CLIENT_SECRET_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.rabobank.tink.redirectUrl }}"
            baseUrl: "https://api.rabobank.nl/openapi"
            clientSSLP12: "RABOBANK_CERTIFICATE_P12_TINK_TAG"
            clientSSLKeyPassword: ""
            qsealcPem: "RABOBANK_QSEALC_TINK_TAG"
            certificateId: "{{ $agentsConfig.rabobank.tink.certificateId }}"
          abn-sandbox:
            clientId: "RABOBANK_CLIENT_ID_ABN_SANDBOX_TAG"
            clientSecret: "RABOBANK_CLIENT_SECRET_ABN_SANDBOX_TAG"
            redirectUrl: "{{ $agentsConfig.rabobank.abn_sandbox.redirectUrl }}"
            baseUrl: "https://api-sandbox.rabobank.nl/openapi/sandbox"
            clientSSLP12: "RABOBANK_CERTIFICATE_P12_ABN_SANDBOX_TAG"
            clientSSLKeyPassword: ""
            qsealcPem: "RABOBANK_QSEALC_ABN_TAG"
            certificateId: "{{ $agentsConfig.rabobank.abn.certificateId }}"
          abn-staging:
            clientId: "RABOBANK_CLIENT_ID_ABN_TAG"
            clientSecret: "RABOBANK_CLIENT_SECRET_ABN_TAG"
            redirectUrl: "{{ $agentsConfig.rabobank.abn_staging.redirectUrl }}"
            baseUrl: "https://api.rabobank.nl/openapi"
            clientSSLP12: "RABOBANK_CERTIFICATE_P12_ABN_TAG"
            clientSSLKeyPassword: ""
            qsealcPem: "RABOBANK_QSEALC_ABN_TAG"
            certificateId: "{{ $agentsConfig.rabobank.abn.certificateId }}"
          abn:
            clientId: "RABOBANK_CLIENT_ID_ABN_TAG"
            clientSecret: "RABOBANK_CLIENT_SECRET_ABN_TAG"
            redirectUrl: "{{ $agentsConfig.rabobank.abn.redirectUrl }}"
            baseUrl: "https://api.rabobank.nl/openapi"
            clientSSLP12: "RABOBANK_CERTIFICATE_P12_ABN_TAG"
            clientSSLKeyPassword: ""
            qsealcPem: "RABOBANK_QSEALC_ABN_TAG"
            certificateId: "{{ $agentsConfig.rabobank.abn.certificateId }}"
        {{- end }}

        {{- if $agentsConfig.redsys }}
        redsys:
          tink:
            baseAuthUrl: "{{ $agentsConfig.redsys.tink.baseAuthUrl }}"
            baseAPIUrl: "{{ $agentsConfig.redsys.tink.baseAPIUrl }}"
            clientId: "REDSYS_CLIENT_ID_TAG"
            clientSigningCertificate: "REDSYS_QSEALC_TAG"
            certificateId: "{{ $agentsConfig.redsys.tink.certificateId }}"
            tppIpAddress: "{{ $agentsConfig.redsys.tink.tppIpAddress }}"
            redirectUrl: "{{ $agentsConfig.redsys.tink.redirectUrl }}"
        {{- end }}

        {{- if $agentsConfig.sibs }}
        activobank:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "ABPT"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "ABPT"
        atlanticoeuropa:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "ATLEU"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "ATLEU"
        bancobpi-pt:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "BBPI"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "BBPI"
        bancoctt:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "BCTT"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "BCTT"
        bancomontepio:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "CEMG"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "CEMG"
        bankinter:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "BNKI"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "BNKI"
        big:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "BIG"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "BIG"
        bpg:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "BPG"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "BPG"
        caixa-pt:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "CGDPT"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "CGDPT"
        caixacrl-pt:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "CCAML"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "CCAML"
        caixa-fr:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "CGDFR"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "CGDFR"
        cemah:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "CEMAH"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "CEMAH"
        cofidis:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "COF"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "COF"
        creditoagricola:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "GCA"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "GCA"
        eurobic-pt:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "BIC"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "BIC"
        millenniumbcp:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "BCPPT"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "BCPPT"
        novobanco:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "NVB"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "NVB"
        novobancoacores:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "NVBA"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "NVBA"
        santander-pt:
          tink:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.tink.certificateId }}"
            clientId: "SIBS_CLIENT_ID_TINK_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_TINK_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_TINK_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.tink.redirectUrl }}"
            aspspCode: "BST"
          cgd:
            baseUrl: "https://site1.sibsapimarket.com/sibs/apimarket"
            certificateId: "{{ $agentsConfig.sibs.cgd.certificateId }}"
            clientId: "SIBS_CLIENT_ID_CGD_TAG"
            clientSecret: "SIBS_CLIENT_SECRET_CGD_TAG"
            clientSigningCertificate: "SIBS_CERTIFICATE_P12_CGD_TAG"
            clientSigningCertificateSerialNumber: "SIBS_CERTIFICATE_SERIAL_NUMBER_CGD_TAG"
            redirectUrl: "{{ $agentsConfig.sibs.cgd.redirectUrl }}"
            aspspCode: "BST"
        {{- end }}

        {{- if $agentsConfig.swedbank }}
        swedbank:
          tink:
            clientId: "SWEDBANK_CLIENT_ID"
            clientSecret: "SWEDBANK_CLIENT_SECRET"
            redirectUrl: "{{ $agentsConfig.swedbank.tink.redirectUrl }}"
            eidasQwac: "{{ $agentsConfig.swedbank.tink.eidasQwac }}"
            bypassTransactionConsent: "{{ $agentsConfig.swedbank.tink.bypassTransactionConsent }}"
        {{- end }}

        {{- if $agentsConfig.unicredit }}
        unicredit-at:
          tink:
            baseUrl: "https://api.bankaustria.at"
            eidasQwac: "{{ $agentsConfig.unicredit.tink.eidasQwac }}"
            redirectUrl: "{{ $agentsConfig.unicredit.tink.redirectUrl }}"
            psuIdType: "BUSINESSNET"
        unicredit-de:
          tink:
            baseUrl: "https://api.unicredit.de"
            eidasQwac: "{{ $agentsConfig.unicredit.tink.eidasQwac }}"
            redirectUrl: "{{ $agentsConfig.unicredit.tink.redirectUrl }}"
            psuIdType: "HVB_ONLINEBANKING"
        unicredit-hu:
          tink:
            baseUrl: "https://api.unicreditbank.hu"
            eidasQwac: "{{ $agentsConfig.unicredit.tink.eidasQwac }}"
            redirectUrl: "{{ $agentsConfig.unicredit.tink.redirectUrl }}"
            psuIdType: "ALL"
        unicredit-it:
          tink:
            baseUrl: "https://api.unicredit.it"
            eidasQwac: "{{ $agentsConfig.unicredit.tink.eidasQwac }}"
            redirectUrl: "{{ $agentsConfig.unicredit.tink.redirectUrl }}"
            psuIdType: "ALL"
        buddybank-it:
          tink:
            baseUrl: "https://api.buddybank.it"
            eidasQwac: "{{ $agentsConfig.unicredit.tink.eidasQwac }}"
            redirectUrl: "{{ $agentsConfig.unicredit.tink.redirectUrl }}"
            psuIdType: "ALL"
        {{- end }}
        {{- if $agentsConfig.cbi }}
        bper:
          tink:
            clientId: "CBI_CLIENT_ID_TINK_TAG"
            clientSecret: "CBI_CLIENT_SECRET_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.cbi.tink.redirectUrl }}"
            aspspCode: "05387"
            aspspProductCode: "SMART"
            eidasQwac: "{{ $agentsConfig.cbi.tink.eidasQwac }}"
            environment: "{{ $agentsConfig.cbi.tink.environment }}"
        bpm:
          tink:
            clientId: "CBI_CLIENT_ID_TINK_TAG"
            clientSecret: "CBI_CLIENT_SECRET_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.cbi.tink.redirectUrl }}"
            aspspCode: "05034"
            aspspProductCode: "IBP01"
            eidasQwac: "{{ $agentsConfig.cbi.tink.eidasQwac }}"
            environment: "{{ $agentsConfig.cbi.tink.environment }}"
        bpsondrio:
          tink:
            clientId: "CBI_CLIENT_ID_TINK_TAG"
            clientSecret: "CBI_CLIENT_SECRET_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.cbi.tink.redirectUrl }}"
            aspspCode: "05696"
            aspspProductCode: "BIR"
            eidasQwac: "{{ $agentsConfig.cbi.tink.eidasQwac }}"
            environment: "{{ $agentsConfig.cbi.tink.environment }}"
        credem:
          tink:
            clientId: "CBI_CLIENT_ID_TINK_TAG"
            clientSecret: "CBI_CLIENT_SECRET_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.cbi.tink.redirectUrl }}"
            aspspCode: "03032"
            aspspProductCode: "PR"
            eidasQwac: "{{ $agentsConfig.cbi.tink.eidasQwac }}"
            environment: "{{ $agentsConfig.cbi.tink.environment }}"
        isp:
          tink:
            clientId: "CBI_CLIENT_ID_TINK_TAG"
            clientSecret: "CBI_CLIENT_SECRET_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.cbi.tink.redirectUrl }}"
            aspspCode: "03069"
            aspspProductCode: "ALLPRODUCTS"
            eidasQwac: "{{ $agentsConfig.cbi.tink.eidasQwac }}"
            environment: "{{ $agentsConfig.cbi.tink.environment }}"
        mps:
          tink:
            clientId: "CBI_CLIENT_ID_TINK_TAG"
            clientSecret: "CBI_CLIENT_SECRET_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.cbi.tink.redirectUrl }}"
            aspspCode: "01030"
            aspspProductCode: "retail"
            eidasQwac: "{{ $agentsConfig.cbi.tink.eidasQwac }}"
            environment: "{{ $agentsConfig.cbi.tink.environment }}"
        ubi:
          tink:
            clientId: "CBI_CLIENT_ID_TINK_TAG"
            clientSecret: "CBI_CLIENT_SECRET_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.cbi.tink.redirectUrl }}"
            aspspCode: "03111"
            aspspProductCode: "ContoCorrenteGenerico"
            eidasQwac: "{{ $agentsConfig.cbi.tink.eidasQwac }}"
            environment: "{{ $agentsConfig.cbi.tink.environment }}"
        {{- end }}

        {{- if $agentsConfig.abnamro }}
        abnamro:
          tink:
            clientId: "ABN_AMRO_CLIENT_ID_TINK_TAG"
            apiKey: "ABN_AMRO_API_KEY_TINK_TAG"
            redirectUrl: "{{ $agentsConfig.abnamro.tink.redirectUrl }}"
            clientSSLP12: "ABN_AMRO_CLIENT_SSL_P12_TINK_TAG"
            clientSSLKeyPassword: "ABN_AMRO_CLIENT_SSL_KEY_PASSWORD_TINK_TAG"
        {{- end }}

        {{- if $agentsConfig.icsConfiguration }}
        icsConfiguration:
          abn:
            clientId: "ICS_CLIENT_ID"
            clientSecret: "ICS_CLIENT_SECRET"
            clientSSLCertificate: "ICS_CLIENT_SSL_CERT"
            rootCACertificate: "ICS_CA_CERT"
            rootCAPassword: "ICS_ROOT_CA_PASSWORD"
        {{- end }}

        {{- if $agentsConfig.demoFinancialInstitution }}
        demoFinancialInstitution:
          mobilebanking:
            baseUrl: "{{ $agentsConfig.demoFinancialInstitution.mobilebanking.baseUrl }}"
          openbanking:
            baseUrl: "{{ $agentsConfig.demoFinancialInstitution.openbanking.baseUrl }}"
        {{- end }}

        {{- if $agentsConfig.cmcic }}
        cic:
          tink:
            baseUrl: "https://oauth2-apiii.e-i.com"
            basePath: "/cic/"
            authBaseUrl: "https://www.cic.fr/oauth2/en/banque/oauth2_authorization.aspx"
            redirectUrl: "{{ $agentsConfig.cmcic.tink.redirectUrl }}"
            clientId: "CIC_CLIENT_ID_TAG"
            keyId: "CMCIC_KEY_ID_TAG"
            certificateId: "{{ $agentsConfig.cmcic.tink.certificateId }}"
        creditmutuel:
          tink:
            baseUrl: "https://oauth2-apisi.e-i.com"
            basePath: "/cm/"
            authBaseUrl: "https://www.creditmutuel.fr/oauth2/en/banque/oauth2_authorization.aspx"
            redirectUrl: "{{ $agentsConfig.cmcic.tink.redirectUrl }}"
            clientId: "CREDITMUTUEL_CLIENT_ID_TAG"
            keyId: "CMCIC_KEY_ID_TAG"
            certificateId: "{{ $agentsConfig.cmcic.tink.certificateId }}"
        {{- end }}

        {{- if $agentsConfig.comdirect }}
        comdirect:
          tink:
            baseUrl: "https://xs2a-api.comdirect.de"
            clientId: "COMDIRECT_CLIENT_ID_TAG"
            certificateId: "{{ $agentsConfig.comdirect.tink.certificateId }}"
            redirectUrl: "{{ $agentsConfig.comdirect.tink.redirectUrl }}"
        {{- end }}

        {{- if $agentsConfig.handelsbanken }}
        handelsbanken:
          tink:
            tppId: "HANDELSBANKEN_TPP_ID_TAG"
            clientId: "HANDELSBANKEN_CLIENT_ID_TAG"
            psuIpAddress: "0.0.0.0"
            redirectUrl: "{{ $agentsConfig.handelsbanken.tink.redirectUrl }}"
            appName: "Tink"
            appDesc: "Tink app"
            certificateId: "{{ $agentsConfig.handelsbanken.tink.certificateId }}"
        {{- end }}

        {{- if $agentsConfig.crosskey }}
        crosskey:
          tink:
            clientId: "CROSSKEY_CLIENT_ID_TAG"
            clientSecret: "CROSSKEY_CLIENT_SECRET_TAG"
            redirectUrl: "{{ $agentsConfig.crosskey.tink.redirectUrl }}"
        {{- end }}

        {{- if $agentsConfig.finecobank }}
        finecobank:
          tink:
            clientId: "FINECOBANK_CLIENT_ID_TAG"
            redirectUrl: "{{ $agentsConfig.finecobank.tink.redirectUrl }}"
            certificateId: "{{ $agentsConfig.finecobank.tink.certificateId }}"
            psuIpAddress: "0.0.0.0"
        {{- end }}

      abnAmro:

      {{- if $agentsConfig.abnAmro }}
      {{- range $name, $env := dict "abnAmroProduction" "production" "abnAmroStaging" "staging" }}
      {{- $envConfig := index $agentsConfig.abnAmro $env }}
      {{ $name }}:

        {{- if kindIs "bool" $envConfig.ignoreCreditCardErrors }}
        ignoreCreditCardErrors: {{ $envConfig.ignoreCreditCardErrors}}
        {{- else }}
        ignoreCreditCardErrors: true
        {{- end }}

        {{- if kindIs "bool" $envConfig.cleanBankId }}
        cleanBankId: {{ $envConfig.cleanBankId}}
        {{- else }}
        cleanBankId: false
        {{- end }}

        trustStore:
          path: data/security/abnamro.truststore
          password: changeme

        internetBanking:
          host: ABN_{{ $env | upper }}_BANKING_HOST
          authorizationToken: ABN_{{ $env | upper }}_BANKING_AUTH_TOKEN

          products:
            creditCards:
            groups:
            - CREDIT_CARDS_PRIVATE_AND_RETAIL
            - PAYMENT_SERVICES
            ids:
            - 129
          payments:
            groups:
            - PAYMENT_ACCOUNTS
            ids:
            - 13
            - 25
          savings:
            groups:
            - SAVINGS_ACCOUNTS
            ids:
            - 5
            - 8
        enrollment:
          url: ABN_{{ $env | upper }}_ENROLLMENT_URL
          apiKey: ABN_{{ $env | upper }}_ENROLLMENT_API_KEY
      {{- end }}
      {{- end }}
