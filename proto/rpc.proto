syntax = "proto3";

option java_multiple_files = true;
option java_package = "se.tink.grpc.v1.rpc";
option java_outer_classname = "Protos";
option go_package = "proto";

import "proto/models.proto";
import "google/protobuf/wrappers.proto";
import "google/protobuf/timestamp.proto";

// AccountService

message ListAccountsRequest {

}

message ListAccountsResponse {
    repeated Account accounts = 1;
}

message ListLoansRequest {

}

message ListLoansResponse {
    repeated Loan loans = 1;
}

message UpdateAccountRequest {
    string account_id = 1;
    google.protobuf.StringValue name = 2;
    Account.Type type = 3;
    google.protobuf.BoolValue favored = 4;
    google.protobuf.BoolValue excluded = 5;
    ExactNumber ownership = 6;
}

message UpdateAccountResponse {
    Account account = 1;
}

// ActivityService

message ListActivityHtmlRequest {
    uint32 offset = 1;
    uint32 limit = 2;
    uint32 screen_width = 3;
    uint32 screen_ppi = 4;
}

message ListActivityHtmlResponse {
    string html_page = 1;
    uint32 next_page_offset = 2;
    repeated string activity_keys = 3;
    repeated string feed_activity_identifiers_list = 4;
}

message ActivityHtmlHeadRequest {
}

message ActivityHtmlHeadResponse {
    string css = 1;
    string metadata = 2;
    string scripts = 3;
}

// CredentialService

message CreateCredentialRequest {
    string provider_name = 1;
    Credential.Type type = 2;
    map<string, string> fields = 3;
}

message CreateCredentialResponse {
    Credential credential = 1;
}

message UpdateCredentialResponse {
    Credential credential = 1;
}

message UpdateCredentialRequest {
    string credential_id = 1;
    map<string, string> fields = 2;
}

message RefreshCredentialsRequest {
    repeated string credential_ids = 1;
}

message RefreshCredentialsResponse {
}

message DeleteCredentialRequest {
    string credential_id = 1;
}

message DeleteCredentialResponse {

}

message EnableCredentialRequest {
    string credential_id = 1;
}

message EnableCredentialResponse {

}

message DisableCredentialRequest {
    string credential_id = 1;
}

message DisableCredentialResponse {

}

message RegisterPushNotificationTokenRequest {
    string device_id = 1;
    string notification_token = 2;
    string notification_public_key = 3;
}


message GetDeviceConfigurationRequest {
    string device_id = 1;
    string market_code = 2;
}

message DeviceConfigurationResponse {
    repeated string feature_flags = 1;
    repeated DeviceConfigurationMarket markets = 2;

    message DeviceConfigurationMarket {
        string market_code = 1;
        string label = 2;
        bool suggested = 3;
        repeated AuthenticationMethod login_methods = 4;
        repeated AuthenticationMethod register_methods = 5;
        string link_to_about_page = 6;
        string link_to_help_page = 7;
        string link_to_security_page = 8;
        string link_to_terms_of_service_page = 9;
    }
}

message SetOriginRequest {
    string device_id = 1;
    bool organic = 2;
    string service_name = 3;
    string external_service_id = 4;
    string media_source = 5;
    string campaign = 6;
    string agency = 7;
    int32 click_time = 8;
    int32 install_time = 9;
    DeviceAppsFlyerOrigin apps_flyer = 10;
    DeviceFacebookOrigin facebook = 11;
}

message SetOriginResponse {
}

message DeleteDeviceRequest {
    string device_id = 1;
}
message DeleteDeviceResponse {
}

message ListDevicesRequest {
}

message ListDevicesResponse {
    repeated Device devices = 1;
}

message RegisterPushNotificationTokenResponse {
    Device device = 1;
}

message SupplementInformationRequest {
    string credential_id = 1;
    map<string, string> supplemental_information_fields = 2;
}

message CancelSupplementInformationRequest {
    string credential_id = 1;
}

message CancelSupplementInformationResponse {
}

message SupplementInformationResponse {
}

message ListCredentialsRequest {
}

message ListCredentialsResponse {
    repeated Credential credentials = 1;
}

// Follow Service

message CreateFollowItemRequest {
    ExpensesFollowCriteria expenses_criteria = 1;
    SearchFollowCriteria search_criteria = 2;
    SavingsFollowCriteria saving_criteria = 3;
    string name = 4;
}

message CreateFollowItemResponse {
    FollowItem follow_item = 1;
}

message UpdateFollowItemRequest {
    ExpensesFollowCriteria expenses_criteria = 1;
    SearchFollowCriteria search_criteria = 2;
    SavingsFollowCriteria saving_criteria = 3;
    string name = 4;
    string follow_item_id = 5;
}

message UpdateFollowItemResponse {
    FollowItem follow_item = 1;
}

message GetFollowItemRequest {
    string follow_item_id = 1;
    string month_period = 2;
}

message GetFollowItemResponse {
    FollowItem follow_item = 1;
}

message GetFollowItemHistoryRequest {
    string follow_item_id = 1;
    PeriodMode period_mode = 2;
}

message GetFollowItemHistoryResponse {
    FollowItemHistory follow_item_history = 1;
}

message DeleteFollowItemRequest {
    string follow_item_id = 1;
}

message DeleteFollowItemResponse {

}

message ListFollowItemRequest {
    string month_period = 1;
}

message ListFollowItemResponse {
    repeated FollowItem follow_items = 1;
}

message SuggestFollowItemRequest {
    ExpensesFollowCriteria expenses_criteria = 1;
    SearchFollowCriteria search_criteria = 2;
    SavingsFollowCriteria saving_criteria = 3;
}

message SuggestFollowItemResponse {
    FollowItem follow_item = 1;
}

// Provider Service

message ListProvidersResponse {
    repeated Provider providers = 1;
}

// Transaction Service

message QueryTransactionsRequest {
    google.protobuf.Int32Value limit = 1;
    google.protobuf.StringValue last_transaction_id = 2;
    repeated string account_ids = 3;
    repeated string credential_ids = 4;
    repeated string category_codes = 5;
    google.protobuf.Timestamp start_date = 6;
    google.protobuf.Timestamp end_date = 7;
    google.protobuf.BoolValue include_upcoming = 8;
    google.protobuf.StringValue query_string = 9;
}

message QueryTransactionsResponse {
    repeated Transaction transactions = 1;
    bool has_more = 2;
    CurrencyDenominatedAmount total_net_amount = 3;
    int32 total_count = 4;
}

message UpdateTransactionRequest {
    string transaction_id = 1;
    google.protobuf.StringValue description = 2;
    google.protobuf.Timestamp date = 3;
    google.protobuf.StringValue notes = 4;
    repeated Tag tags = 5;
}

message UpdateTransactionResponse {
    Transaction transaction = 1;
}

message GetTransactionRequest {
    string transaction_id = 1;
}

message GetTransactionResponse {
    Transaction transaction = 1;
}

message CategorizeTransactionsRequest {
    string category_code = 1;
    repeated string transaction_ids = 2;
}

message CategorizeTransactionsResponse {
    repeated Transaction transactions = 1;
}

message GetSimilarTransactionsRequest {
    string transaction_id = 1;
    google.protobuf.StringValue category_code = 2;
}

message GetSimilarTransactionsResponse {
    repeated Transaction transactions = 1;
}

message SuggestTransactionsRequest {
    int32 number_of_clusters = 1;
    bool evaluate_everything = 2;
}

message SuggestTransactionsResponse {
    ExactNumber categorization_improvement = 1;
    ExactNumber categorization_level = 2;
    repeated TransactionCluster clusters = 3;
}

// Streaming Service

message StreamingRequest {

}

message StreamingResponse {
    enum Type {
        CREATE = 0;
        READ = 1;
        UPDATE = 2;
        DELETE = 3;
    }

    Type type = 1;
    google.protobuf.Timestamp timestamp = 2;
    Credentials credentials = 3;
    Accounts accounts = 4;
    Transactions transactions = 5;
    StatisticTree statistics = 6;
    Providers providers = 7;
    CategoryTree categories = 8;
    Periods periods = 9;
    FollowItems follow_items = 10;
    SignableOperations signable_operations = 11;
    UserConfiguration user_configuration = 12;
}

message ProviderListRequest {
    Provider.Capability capability = 1;
}

message ProvidersByDeviceRequest {
    string device_id = 1;
    string market_code = 2;
}

message ProviderSuggestRequest {

}

message QueryStatisticsRequest {
    string description = 1;
    repeated PeriodDescription periods = 2;
    PeriodMode period_mode = 3;
    repeated StatisticTree.Type types = 4;
    bool pad_results_until_today = 5;
}

message QueryStatisticsResponse {
    StatisticTree statistics = 1;
}

message GetInsightsRequest {

}

message GetStatisticsRequest {

}

message StatisticsResponse {
    StatisticTree statistics = 1;
}

message InsightsResponse {
    InsightsCategories categories = 1;
    InsightsMortgage mortgage = 2;
    InsightsSavings savings = 3;
    InsightsDailySpend daily_spend = 4;
    InsightsLeftToSpend left_to_spend = 5;
}

message ListCategoriesRequest {
}

message ListCategoriesResponse {
    CategoryTree categories = 1;
}

message GetTrackingConfigurationRequest {

}

message GetTrackingConfigurationResponse {
    string tracking_user_id = 1;
    string tracking_username = 2;
}

message TrackingRequest {
    string session_id = 1;
    repeated TrackingEvent events = 2;
    repeated TrackingTiming timings = 3;
    repeated TrackingView views = 4;
    string advertising_id = 5;
    bool limit_advertising = 6;
}

message TrackingResponse {
}

message TrackingSessionRequest {
}

message TrackingSessionResponse {
    string session_id = 1;
}

message TransferListRequest {
    Transfer.Type type = 1;
}

message TransferListResponse {
    repeated Transfer transfers = 1;
}

message TransferGetRequest {
    string transfer_id = 1;
}

message TransferGetResponse {
    Transfer transfer = 1;
}

message CreateTransferRequest {
    CurrencyDenominatedAmount amount = 1;
    string destination = 2;
    string destination_message = 3;
    string source = 4;
    string source_message = 5;
    google.protobuf.Timestamp due_date = 6;
}

message CreateTransferResponse {
    SignableOperation signable_operation = 1;
}

message UpdateTransferRequest {
    string transfer_id = 1;
    CurrencyDenominatedAmount amount = 2;
    google.protobuf.StringValue destination = 3;
    google.protobuf.StringValue destination_message = 4;
    google.protobuf.StringValue source = 5;
    google.protobuf.StringValue source_message = 6;
    google.protobuf.Timestamp due_date = 7;
}

message UpdateTransferResponse {
    SignableOperation signable_operation = 1;
}

message TransferListAccountsRequest {
    google.protobuf.StringValue id = 1;
}

message GiroLookupRequest {
    string giro_number = 1;
}

message GiroLookupResponse {
    repeated GiroLookupEntity giro_entities = 1;
}

message ClearingLookupRequest {
    string clearing_number = 1;
}

message ClearingLookupResponse {
    string bank_display_name = 1;
    Images images = 2;
}

message CreateTransferDestinationRequest {
    string uri = 1;
    string name = 2;
}

message GetAccountsForTransferRequest {
    string transfer_id = 1;
}

message GetAccountsForTransferResponse {
    repeated Account account = 1;
}

message GetTransferDestinationsRequest {

}

message GetTransferDestinationsResponse {
    repeated TransferDestinationPerAccount destinations_per_account = 1;
}


message CreateTransferDestinationResponse {
    TransferDestination destination = 1;
}

message ListBusinessDaysRequest {
    uint32 start_year = 1 ;
    uint32 start_month = 2;
    uint32 months = 3;

}

message ListBusinessDaysResponse {
    repeated BusinessDays business_days = 1;
}

message NotificationSettingsRequest {
}

message NotificationSettingsResponse {
    NotificationSettings notification_settings = 1;
}

message UpdateNotificationSettingsRequest {
    repeated NotificationType notification_types = 1;
}

message PeriodSettingsRequest {
}

message PeriodSettingsResponse {
    PeriodSettings period_settings = 1;
}

message UpdatePeriodSettingsRequest {
    PeriodDateBreakType period_date_break_type = 1;
    google.protobuf.Int32Value monthly_adjusted_day = 2;
}

message UpdateI18NSettingsRequest {
    google.protobuf.StringValue locale_code = 1;
}

message UpdateI18NSettingsResponse {
    I18NSettings i18n_settings = 1;
}

message LoginRequest {
    string authentication_token = 1;
}

message LoginResponse {
    string session_id = 1;
}

message RegisterRequest {
    string authentication_token = 1;
    string email = 2;
    string locale = 3;
}

message RegisterResponse {
    string session_id = 1;
}

message LogoutRequest {
    bool autologout = 1;
}

message LogoutResponse {
}

message UpdateEmailRequest {
    google.protobuf.StringValue email = 1;
}

message UpdateEmailResponse {
    UserProfile user_profile = 1;
}

message GetProfileRequest {
}

message GetProfileResponse {
    UserProfile user_profile = 1;
}

message DeleteUserRequest {
    repeated string reasons = 1;
    google.protobuf.StringValue comment = 2;
}

message DeleteUserResponse {
}

message RateAppRequest {
    RateAppStatus status = 1;
}

message RateAppResponse {
}

// Initiate a Mobile BankId authentication request. Two different initiations are possible.
// 1) NationalId available => Trigger a bankid for the nationalId that is provided.
// 2) Authentication token available => Trigger a bankid for the user that is connected to the authentication token.
message InitiateBankIdAuthenticationRequest {
    string market_code = 2;

    oneof type {
        string national_id = 1;
        string authentication_token = 3;
    }
}

message InitiateBankIdAuthenticationResponse {
    string auto_start_token = 1;
    string authentication_token = 2;
    BankIdAuthenticationStatus status = 3;
}

message CollectBankIdAuthenticationRequest {
    string authentication_token = 1;
}

message CollectBankIdAuthenticationResponse {
    string national_id = 1;
    BankIdAuthenticationStatus status = 2;
}

message EmailAndPasswordAuthenticationRequest {
    string email = 1;
    string password = 2;
    string market_code = 3;
}

message EmailAndPasswordAuthenticationResponse {
    string authentication_token = 1;
    AuthenticationStatus status = 2;
}

message ForgotPasswordRequest {
    string email = 1;
}

message ForgotPasswordResponse {

}

message ResetPasswordRequest {
    string tokenId = 1;
    string password = 2;
}

message ResetPasswordResponse {

}

message UpdatePasswordRequest {
    string old_password = 1;
    string new_password = 2;
}

message UpdatePasswordResponse {

}

message GetIdentityEventRequest {
    string identity_event_id = 1;
}

message SeenIdentityEventRequest {
    repeated string identity_event_ids = 1;
}

message AnswerIdentityEventRequest {
    string identity_event_id = 1;
    IdentityEventAnswer answer = 2;
}

message IdentityEventListRequest {
}

message IdentityEventListResponse {
    repeated IdentityEventSummary events = 1;
}

message IdentityEventResponse {
    IdentityEvent event = 1;
}

message SeenIdentityEventResponse {
    repeated IdentityEventSummary events = 1;
}

message AnswerIdentityEventResponse {
    IdentityEvent event = 1;
}

message IdentityStateRequest {
}

message IdentityStateResponse {
    IdentityState state = 1;
}

message InitiateSmsOtpRequest {
    string phone_number = 1;
    string locale = 2;
}

message InitiateSmsOtpResponse {
    string sms_otp_verification_token = 1;
    int32 otp_length = 2;
    google.protobuf.Timestamp expire_at = 3;
}

message VerifySmsOtpRequest {
    string sms_otp_verification_token = 1;
    string code = 2;
}

message VerifySmsOtpResponse {
    string sms_otp_verification_token = 1;
    SmsOtpStatus status = 2;
    bool existing_user = 3;
}

message SmsOtpAndPin6AuthenticationRequest {
    string sms_otp_verification_token = 1;
    string pin6 = 2;
    string market_code = 3;
}

message SmsOtpAndPin6AuthenticationResponse {
    string authentication_token = 1;
    AuthenticationStatus status = 2;
}

message PhoneNumberAndPin6AuthenticationRequest {
    string phone_number = 1;
    string pin6 = 2;
    string market_code = 3;
}

message PhoneNumberAndPin6AuthenticationResponse {
    string authentication_token = 1;
    AuthenticationStatus status = 2;
}

message ListConsentsRequest {
}

message ListConsentsResponse {
    repeated Consent consents = 1;
}

message AvailableConsentsRequest {
}

message AvailableConsentsResponse {
    repeated Consent consents = 1;
}

message ConsentDetailsRequest {
    string key = 1;
}

message ConsentDetailsResponse {
    Consent consent = 1;
}

message UserConsentsListRequest {
}

message UserConsentsListResponse {
    repeated UserConsent user_consents = 1;
}

message GiveConsentRequest {
    string key = 1;
    string version = 2;
    ConsentAction action = 3;
    string checksum = 4;
}

message GiveConsentResponse {
    UserConsent user_consent = 1;
}

message UserConsentDetailsRequest {
    string id = 1;
}

message UserConsentDetailsResponse {
    UserConsent user_consent = 1;
}

message UpdatePin6Request {
    string old_pin6 = 1;
    string new_pin6 = 2;
}

message UpdatePin6Response {

}

message UpdatePhoneNumberRequest {
    string sms_otp_verification_token = 1;
    string pin6 = 2;
}

message UpdatePhoneNumberResponse {

}

message ResetPin6Request {
    string sms_otp_verification_token = 1;
    string pin6 = 2;
}

message ResetPin6Response {
    string authentication_token = 1;
    AuthenticationStatus status = 2;
}

message AbnAmroAuthenticationRequest {
    string internet_banking_session_token = 1;
}

message AbnAmroAuthenticationResponse {
    string authentication_token = 1;
    AuthenticationStatus status = 2;
}

message AbnAmroMigrationRequest {
    string sms_otp_verification_token = 1;
    string pin6 = 2;
}

message AbnAmroMigrationResponse {

}

message PingRequest {
    string message = 1;
}

message PingResponse {
    string message = 1;
}

message CreateApplicationRequest {
    ApplicationType type = 1;
}

message CreateApplicationResponse {
    Application application = 1;
}

message GetApplicationRequest {
    string application_id = 1;
}

message GetApplicationResponse {
    Application application = 1;
}

message DeleteApplicationRequest {
    string application_id = 1;
}

message DeleteApplicationResponse {

}

message GetApplicationSummaryRequest {
    string application_id = 1;
}

message GetApplicationSummaryResponse {
    ApplicationSummary summary = 1;
}

message GetApplicationSummaryListRequest {

}

message GetApplicationSummaryListResponse {
    repeated ApplicationSummary summary = 1;
}

message SubmitApplicationFormRequest {
    string application_id = 1;
    RequestApplicationForm form = 2;
}

message SubmitApplicationFormResponse {
    Application application = 1;
}

message SubmitApplicationRequest {
    string application_id = 1;
}

message SubmitApplicationResponse {
    SignableOperation signable_operation = 1;
}

message GetEligibleApplicationTypesRequest {

}

message GetEligibleApplicationTypesResponse {
    repeated ApplicationType types = 1;
}

message SelectInsightOptionRequest {
    string insights_id = 1;
    string option_id = 2;
}
message SelectInsightOptionResponse {

}

message ListPropertiesRequest {
}

message ListPropertiesResponse {
    repeated Property properties = 1;
}

message GetPropertyRequest {
    string property_id = 1;
}

message GetPropertyResponse {
    Property property = 1;
}

message UpdatePropertyRequest {
    string property_id = 1;
    int32 number_of_rooms = 2;
    int32 number_of_square_meters = 3;
}

message UpdatePropertyResponse {
    Property property = 1;
}

message DeleteValuationRequest {
    string property_id = 1;
}

message DeleteValuationResponse {
    Property property = 1;
}

message GetPropertyEventsRequest {}

message GetPropertyEventsResponse {
    repeated PropertyEvent property_events = 1;
}


message GetActionableInsightsRequest {

}

message GetActionableInsightsResponse {
    repeated Insight insights = 1;
}

message ListAuthenticationKeysRequest {}

message ListAuthenticationKeysResponse {
    repeated AuthenticationKey authentication_keys = 1;
}

message StoreAuthenticationKeyRequest {
    string authentication_token = 1;
    AuthenticationKeyType key_type = 2;
    string key = 3;
    AuthenticationSource source = 4;
}

message StoreAuthenticationKeyResponse {
    string key_id = 1;
}

message DeleteAuthenticationKeyRequest {
    string key_id = 1;
}

message DeleteAuthenticationKeyResponse {}

message GetAuthenticationChallengeRequest {
    string key_id = 1;
}

message GetAuthenticationChallengeResponse {
    string challenge = 1;
}

message SignedChallengeAuthenticationRequest {
    string signed_challenge = 1;
}

message SignedChallengeAuthenticationResponse {
    string authentication_token = 1;
    AuthenticationStatus status = 2;
}
