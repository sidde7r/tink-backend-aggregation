
REQUEST 1
POST https://secure397.lansforsakringar.se/as/token.oauth2
Accept: application/json
Content-Type: application/x-www-form-urlencoded

client_id=dummyClient&grant_type=client_credentials&client_secret=dummySecret

RESPONSE 1
200
Date: Thu, 04 Mar 2021 15:36:00 GMT
Date: Thu, 04 Mar 2021 15:36:00 GMT
Content-Type: application/json;charset=utf-8

{
  "access_token":"token",
  "token_type":"Bearer",
  "expires_in":299
}

REQUEST 2
POST https://api.bank.lansforsakringar.se:443/openbanking/ano/v3/consents
Accept: application/json
Content-Type: application/json
PSU-IP-Address: 127.0.0.1
PSU-User-Agent: Desktop Mode
TPP-Redirect-URI: https://127.0.0.1:7357/api/v1/thirdparty/callback
TPP-NOK-Redirect-URI: https://127.0.0.1:7357/api/v1/thirdparty/callback

{}

RESPONSE 2
201
Content-Type: application/json;charset=utf-8

{
  "consentId": "consentID",
  "consentStatus": "RECEIVED",
  "_links": {
    "self": {
      "href": "/openbanking/sec/v2/consents/consentID"
    },
    "status": {
      "href": "/openbanking/sec/v2/consents/consentID/status"
    },
    "startAuthorisation": {
      "href": "/openbanking/ano/v3/consents/consentID/authorisations"
    }
  }
}

REQUEST 3
POST https://api.bank.lansforsakringar.se:443/openbanking/ano/v3/consents/consentID/authorisations
Content-Type: application/json
Accept: application/json
TPP-Redirect-URI: https://127.0.0.1:7357/api/v1/thirdparty/callback
TPP-NOK-Redirect-URI: https://127.0.0.1:7357/api/v1/thirdparty/callback
Decoupled: true

{}

RESPONSE 3
201
Content-Type: application/json
Accept: application/json

{
  "scaStatus": "RECEIVED",
  "consentId": "consentID",
  "authorisationId": "authorisationId",
  "_links": {
    "self": {
      "href": "/openbanking/sec/v2/consents/consentID"
    },
    "status": {
      "href": "/openbanking/sec/v2/consents/consentID/status"
    },
    "scaOAuth": {
      "href": "https://secure397.lansforsakringar.se/.well-known/openid-configuration"
    },
    "scaStatus": {
      "href": "/openbanking/ano/v3/consents/consentID/authorisations/authorisationId"
    }
  }
}

REQUEST 5
GET https://api.bank.lansforsakringar.se:443/openbanking/ano/v3/consents/consentID/authorisations/authorisationId
Content-Type: application/json
Accept: application/json
TPP-Redirect-URI: https://127.0.0.1:7357/api/v1/thirdparty/callback
TPP-NOK-Redirect-URI: https://127.0.0.1:7357/api/v1/thirdparty/callback
Decoupled: true

RESPONSE 5
200
Content-Type: application/json

{
"scaStatus":"FINALISED",
"authorisationCode":"dummyCode"
}

REQUEST 6
POST https://secure397.lansforsakringar.se/as/token.oauth2
Content-Type: application/x-www-form-urlencoded
Accept: application/json

client_id=dummyClient&grant_type=authorization_code&code=dummyCode&client_secret=dummySecret&redirect_uri=https%3A%2F%2F127.0.0.1%3A7357%2Fapi%2Fv1%2Fthirdparty%2Fcallback

RESPONSE 6
200
Date: Thu, 04 Mar 2021 15:36:11 GMT
Date: Thu, 04 Mar 2021 15:36:11 GMT
Content-Type: application/json;charset=utf-8

{
    "access_token": "dummyToken",
    "expires_in": 299,
    "refresh_token": "dummyRefreshToken",
    "token_type": "Bearer"
}

REQUEST 7
GET https://api.bank.lansforsakringar.se:443/openbanking/pis/v3/accountnumbers
Accept: application/json
Content-Type: application/json
PSU-IP-Address: 127.0.0.1
PSU-User-Agent: Desktop Mode
TPP-NOK-Redirect-URI: https://127.0.0.1:7357/api/v1/thirdparty/callback

RESPONSE 7
200
Date: Wed, 15 Jul 2020 12:51:09 GMT
Date: Wed, 15 Jul 2020 12:51:09 GMT
Content-Type: application/json;charset=utf-8
Cache-Control: no-cache, no-store, private, proxy-revalidate

{
    "accounts": [
        {
            "bban": "90251234567",
            "allowedTransactionTypes": [
                "DOMESTIC_CREDIT_TRANSFERS",
                "DOMESTIC_GIROS",
                "CROSS_BORDER_CREDIT_TRANSFERS"
            ]
        }
    ]
}

REQUEST 8
POST https://api.bank.lansforsakringar.se:443/openbanking/pis/v3/payments/domestic-giros
Accept: application/json
Content-Type: application/json

{
    "creditorAccount": {
        "number": "991-2148"
    }, 
    "debtorAccount": {
        "bban": "90251234567", 
        "currency": "SEK"
    }, 
    "instructedAmount": {
        "amount": "1.00",
        "currency": "SEK"
    },
    "remittanceInformationStructured": null,
    "remittanceInformationUnstructured": "Remmitance",
    "requestedExecutionDate": "2021-01-21"
}

RESPONSE 8 SET STATE4
201
Date: Thu, 04 Mar 2021 15:36:11 GMT
Date: Thu, 04 Mar 2021 15:36:12 GMT
Content-Type: application/json;charset=utf-8

{
    "_links": {
        "self": {
            "href": "/openbanking/pis/v3/payments/dummyrequest"
        }
    },
    "paymentId": "dummyrequest",
    "transactionStatus": "RCVD"
}

REQUEST 9 MATCH STATE4
GET https://api.bank.lansforsakringar.se:443/openbanking/pis/v3/payments/dummyrequest
Accept: application/json
Content-Type: application/json

RESPONSE 9 SET STATE5
200
Date: Thu, 04 Mar 2021 15:36:13 GMT
Date: Thu, 04 Mar 2021 15:36:13 GMT
Content-Type: application/json;charset=utf-8

{
    "domesticPayment": {
        "amount": {
            "amount": "1.00",
            "currency": "SEK"
        },
        "creditorAccount": {
            "accountNumber": "991-2148",
            "currency": "SEK"
        },
        "debtorAccount": {
            "accountNumber": "90251234567",
            "currency": "SEK"
        },
        "remittanceInformationStructured": null,
        "remittanceInformationUnstructured": "Remmitance",
        "requestedExecutionDate": "2021-01-21",
        "tpReference": "045a25ce-b8b4-4620-be98-1c771e6b06b0",
        "transactionStatus": "RCVD"
    }
}

REQUEST 10
POST https://api.bank.lansforsakringar.se:443/openbanking/pis/v3/signing-baskets
Accept: application/json
Content-Type: application/json

{
    "transactions": [
        {
            "paymentId": "dummyrequest"
        }
    ]
}

RESPONSE 10
201
Date: Thu, 04 Mar 2021 15:36:14 GMT
Date: Thu, 04 Mar 2021 15:36:15 GMT
Content-Type: application/json;charset=utf-8

{
    "_links": {
        "self": {
            "href": "/openbanking/pis/v3/signing-baskets/13a6bd02-aca9-4605-b871-c7eb7701188a"
        },
        "startAuthorisation": {
            "href": "/openbanking/pis/v3/signing-baskets/13a6bd02-aca9-4605-b871-c7eb7701188a/authorisations"
        }
    },
    "basketId": "13a6bd02-aca9-4605-b871-c7eb7701188a",
    "transactionStatus": "RCVD"
}

REQUEST 11
POST https://api.bank.lansforsakringar.se:443/openbanking/pis/v3/signing-baskets/13a6bd02-aca9-4605-b871-c7eb7701188a/authorisations
Accept: application/json
Content-Type: application/json

{}

RESPONSE 11 SET STATE7
201
Date: Thu, 04 Mar 2021 15:36:15 GMT
Date: Thu, 04 Mar 2021 15:36:15 GMT
Content-Type: application/json;charset=utf-8

{
    "_links": {
        "scaOAuth": {
            "href": "https://secure397.lansforsakringar.se/.well-known/openid-configuration"
        },
        "self": {
            "href": "/openbanking/pis/v3/signing-baskets/13a6bd02-aca9-4605-b871-c7eb7701188a"
        }
    },
    "authorisationId": "a3170daa-64e9-407d-a8d8-857fd04817ce",
    "scaStatus": "RECEIVED"
}

REQUEST 12 MATCH STATE7
GET https://api.bank.lansforsakringar.se:443/openbanking/pis/v3/payments/dummyrequest
Accept: application/json
Content-Type: application/json

RESPONSE 12
200
Date: Thu, 04 Mar 2021 15:36:26 GMT
Date: Thu, 04 Mar 2021 15:36:27 GMT
Content-Type: application/json;charset=utf-8

{
    "domesticPayment": {
        "amount": {
            "amount": 1.00,
            "currency": "SEK"
        }, 
        "creditorAccount": {
            "accountNumber": "991-2148",
            "currency": "SEK"
        }, 
        "debtorAccount": {
            "accountNumber": "90251234567", 
            "currency": "SEK"
        }, 
        "remittanceInformationStructured": null,
        "remittanceInformationUnstructured": "Remmitance",
        "requestedExecutionDate": "2021-01-21", 
        "tpReference": "045a25ce-b8b4-4620-be98-1c771e6b06b0", 
        "transactionStatus": "ACTC"
    }
}
