REQUEST 1
POST https://oauth2.labanquepostale.com/token
Content-Type: application/x-www-form-urlencoded
Accept: application/json
X-Aggregator : Tink Testing

RESPONSE 1
200
Content-Type: application/json

{"token_type":"bearer", "access_token":"DUMMY_ACCESS_TOKEN", "expires_in":3600, "consented_on":0, "scope":"aisp" }

REQUEST 2
GET https://api.labanquepostale.com/v1/accounts
Authorization: Bearer DUMMY_ACCESS_TOKEN
X-Aggregator: Tink Testing

RESPONSE 2
200
Content-Type: application/json

{"_links":{"self":{"href":"/v1/accounts"}},"accounts":[{"_links":{"balances":{"href":"/v1/accounts/DUMMY_RESOURCE_ID/balances"},"transactions":{"href":"/v1/accounts/DUMMY_RESOURCE_ID/transactions"}},"resourceId":"DUMMY_RESOURCE_ID","accountId":{"iban":"DUMMY_IBAN","currency":"EUR"},"name":"DUMMY_NAME","usage":"PRIV","cashAccountType":"CACC"}]}

REQUEST 3
GET https://api.labanquepostale.com/v1/accounts/DUMMY_RESOURCE_ID/balances
X-Aggregator: Tink Testing
Authorization: Bearer DUMMY_ACCESS_TOKEN

RESPONSE 3
200
Content-Type: application/json

{"balances":[{"balanceAmount":{"amount":"243.47","currency":"EUR"},"balanceType":"XPCD","name":"Avoir disponible"}],"_links":{"self":{"href":"/v1/accounts/DUMMY_RESOURCE_ID/balances"},"transactions":{"href":"/v1/accounts/DUMMY_RESOURCE_ID/transactions"},"parent-list":{"href":"/v1/accounts"}}}

REQUEST 4
GET https://api.labanquepostale.com/v1/accounts/DUMMY_RESOURCE_ID/transactions
X-Aggregator: Tink Testing

RESPONSE 4
500
Content-Type: application/json

{"timestamp":"2021-10-12T22:12:16.669+0200","status":"500","message":"This service is temporarily unavailable. Please try again later.","path":"/api/v1/accounts/2917303W029/transactions"}

REQUEST 5
GET https://api.labanquepostale.com/v1/trusted-beneficiaries
X-Aggregator: Tink Testing
Authorization: Bearer DUMMY_ACCESS_TOKEN

RESPONSE 5 SET BENEFICIARIES_FIRST_PAGE_LOADED
200
Content-Type: application/json

{"beneficiaries":[{"creditorAccount":{"iban":"FR7612548029981234567890161"},"creditorAgent":{"bicFi":"AXUBFRPP"},"creditor":{"name":"DUMMY_NAME"}}],"_links":{"self":{"href":"/trusted-beneficiaries","templated":false},"parent-list":null,"first":null,"last":null,"next":{"href":"/trusted-beneficiaries?page=2","templated":true},"prev":null}}

REQUEST 6 MATCH BENEFICIARIES_FIRST_PAGE_LOADED
GET https://api.labanquepostale.com/v1/trusted-beneficiaries?page=2
X-Aggregator: Tink Testing
Authorization: Bearer DUMMY_ACCESS_TOKEN

RESPONSE 6
200
Content-Type: application/json

{"beneficiaries":[{"creditorAccount":{"iban":"FR7610278001110002007680247"},"creditorAgent":{"bicFi":"AXUBFRPP"},"creditor":{"name":"DUMMY_NAME"}}],"_links":{"self":{"href":"/trusted-beneficiaries?page=2","templated":true},"parent-list":null,"first":null,"last":null,"next":null,"prev":{"href":"/trusted-beneficiaries","templated":false}}}
