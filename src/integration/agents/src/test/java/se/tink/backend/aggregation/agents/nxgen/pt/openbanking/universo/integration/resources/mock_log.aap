REQUEST 1
POST https://api.psd2.universo.pt/berlingroup/v1/consents
Accept: application/json
Content-Type: application/json
PSU-IP-ADDRESS: 127.0.0.1
digest: SHA-256=PjmibtOQELSiBDrpYfpQGeGf2ORTVeFnWz3TINxDt8s=
apiKey: apiKey

{"access":{"allPsd2":"all-accounts"},"combinedServiceIndicator":false,"frequencyPerDay":4,"recurringIndicator":true,"validUntil":"1992-07-08"}

RESPONSE 1
201
Date: Fri, 26 Mar 2021 11:27:47 GMT
Date: Fri, 26 Mar 2021 11:27:48 GMT
Content-Type: application/json

{"consentId":"consentId","consentStatus":"received","_links":{"self":{"href":"/v1/consents/consentId"},"scaOAuth":{"href":"https://login.psd2.universo.pt/psd2/v1/berlingroup-auth/.well-known/oauth-authorization-server"},"status":{"href":"/v1/consents/consentId/status"},"scaStatus":{"href":"/v1/consents/consentId/authorisations/605dc53466d0c254e8b8afbd"}}}

REQUEST 2
GET https://login.psd2.universo.pt/psd2/v1/berlingroup-auth/.well-known/oauth-authorization-server
Accept: application/json
X-Aggregator: Tink Testing
apiKey: apiKey

RESPONSE 2
200
Date: Fri, 26 Mar 2021 11:27:49 GMT
Date: Fri, 26 Mar 2021 11:27:49 GMT
Content-Type: application/json

{"issuer":"https://api.psd2.universo.pt/psd2/v1/berlingroup-auth","authorization_endpoint":"https://login.psd2.universo.pt/psd2/v1/berlingroup-auth/authorise","token_endpoint":"https://api.psd2.universo.pt/psd2/v1/berlingroup-auth/token","scopes_supported":["AIS:<consent-id>","SBM:<basket-id>","CIS:<consent-id>","PIS:<payment-id>"],"response_types_supported":["code"],"response_modes_supported":["query"],"grant_types_supported":["authorization_code"],"service_documentation":"https://api.psd2.universo.pt/psd2/v1/berlingroup-auth/v1/service_documentation.html","ui_locales_supported":["en-US","fr-FR","fr-BE","hi-IN","nl-NL","nl-BE"]}

REQUEST 3
POST https://api.psd2.universo.pt/psd2/v1/berlingroup-auth/token
Accept: application/json
Content-Type: application/x-www-form-urlencoded
X-Aggregator: Tink Testing
apiKey: apiKey

RESPONSE 3
200
Date: Fri, 26 Mar 2021 11:29:26 GMT
Date: Fri, 26 Mar 2021 11:29:26 GMT
Content-Type: application/json

{"scope":"AIS","jti":"1b291cfa-9028-4c89-9112-d12eddaf5e14","access_token":"access_token","expires_in":899,"token_type":"bearer","refresh_token":"refresh_token"}

REQUEST 4
GET https://api.psd2.universo.pt/berlingroup/v1/consents/consentId
Accept: application/json
Content-Type: application/json
X-Aggregator: Tink Testing
apiKey: apiKey

RESPONSE 4
200
Date: Fri, 26 Mar 2021 11:29:27 GMT
Date: Fri, 26 Mar 2021 11:29:27 GMT
Content-Type: application/json

{"access":{"allPsd2":"all-accounts"},"recurringIndicator":true,"validUntil":"2021-06-23","frequencyPerDay":4,"combinedServiceIndicator":false,"lastActionDate":"2021-03-26","consentStatus":"valid"}

REQUEST 5
GET https://api.psd2.universo.pt/berlingroup/v1/accounts
PSU-IP-ADDRESS: 127.0.0.1
X-Aggregator: Tink Testing
apiKey: apiKey

RESPONSE 5
200
Date: Fri, 26 Mar 2021 11:29:28 GMT
Date: Fri, 26 Mar 2021 11:29:29 GMT
Content-Type: application/json

{"accounts":[{"resourceId":"resourceId1","iban":"iban1","currency":"EUR","name":"Credit","product":"Current Account","cashAccountType":"CACC","_links":{"balances":{"href":"/v1/accounts/resourceId1/balances"},"transactions":{"href":"/v1/accounts/resourceId1/transactions"}}},{"resourceId":"resourceId2","iban":"iban2","currency":"EUR","name":"Debit","product":"Current Account","cashAccountType":"CACC","_links":{"balances":{"href":"/v1/accounts/resourceId2/balances"},"transactions":{"href":"/v1/accounts/resourceId2/transactions"}}}]}

REQUEST 6
GET https://api.psd2.universo.pt/berlingroup/v1/accounts/resourceId1/balances
Accept: application/json
Content-Type: application/json
PSU-IP-ADDRESS: 127.0.0.1
X-Aggregator: Tink Testing
apiKey: apiKey

RESPONSE 6
200
Date: Fri, 26 Mar 2021 11:29:30 GMT
Date: Fri, 26 Mar 2021 11:29:30 GMT
Content-Type: application/json

{"balances":[{"balanceAmount":{"amount":"195950.00","currency":"EUR"},"balanceType":"interimAvailable","referenceDate":"2021-03-26"}]}

REQUEST 7
GET https://api.psd2.universo.pt/berlingroup/v1/accounts/resourceId2/balances
Accept: application/json
Content-Type: application/json
PSU-IP-ADDRESS: 127.0.0.1
X-Aggregator: Tink Testing
apiKey: apiKey

RESPONSE 7
200
Date: Fri, 26 Mar 2021 11:29:31 GMT
Date: Fri, 26 Mar 2021 11:29:32 GMT
Content-Type: application/json

{"balances":[{"balanceAmount":{"amount":"0.00","currency":"EUR"},"balanceType":"interimAvailable","referenceDate":"2021-03-26"}]}

REQUEST 8
GET https://api.psd2.universo.pt/berlingroup/v1/accounts/resourceId1/transactions
Accept: application/json
Content-Type: application/json
PSU-IP-ADDRESS: 127.0.0.1
X-Aggregator: Tink Testing
apiKey: apiKey

RESPONSE 8
200
Date: Fri, 26 Mar 2021 11:29:33 GMT
Date: Fri, 26 Mar 2021 11:29:34 GMT
Content-Type: application/json

{"transactions":{"booked":[{"bookingDate":"2021-03-19","valueDate":"2021-03-18","transactionAmount":{"amount":"1001.00","currency":"EUR"},"creditorAccount":{},"remittanceInformationStructured":" Pagamento  ","entryReference":"2103198ZZZZA","_links":{"href":""}}],"_links":{"first":{"href":"/v1/accounts/resourceId1/transactions?dateTo=2021-03-26&bookingStatus=booked&dateFrom=2011-03-27&range=0-49"},"account":{"href":"/v1/accounts/resourceId1"},"self":{"href":"/v1/accounts/resourceId1/transactions?dateTo=2021-03-26&bookingStatus=booked&dateFrom=2011-03-27&range=0-49"}}},"_links":{"href":""}}

REQUEST 9
GET https://api.psd2.universo.pt/berlingroup/v1/accounts/resourceId2/transactions
Accept: application/json
Content-Type: application/json
PSU-IP-ADDRESS: 127.0.0.1
X-Aggregator: Tink Testing
apiKey: apiKey

RESPONSE 9
200
Date: Fri, 26 Mar 2021 11:29:36 GMT
Date: Fri, 26 Mar 2021 11:29:36 GMT
Content-Type: application/json

{"transactions":{"booked":[],"_links":{"first":{"href":"/v1/accounts/resourceId2/transactions?dateTo=2021-03-26&bookingStatus=booked&dateFrom=2011-03-27&range=0-49"},"account":{"href":"/v1/accounts/resourceId2"},"self":{"href":"/v1/accounts/resourceId2/transactions?dateTo=2021-03-26&bookingStatus=booked&dateFrom=2011-03-27&range=0-49"}}},"_links":{"href":""}}
