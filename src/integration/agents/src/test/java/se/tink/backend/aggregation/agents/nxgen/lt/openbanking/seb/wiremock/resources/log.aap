
REQUEST 1
POST https://api.ob.baltics.sebgroup.com/v2/oauth/authorize-decoupled
Accept: application/json
Content-Type: application/json

{"bic":"CBVILT2X","scopes":"accounts account.lists consents","psu_id":"user1","psu_corporate_id":"user1Id","client_id":"dummyId"}

RESPONSE 1
201
Content-Type: application/json;charset=utf-8

{"status":"received","authorization_id":"123authorization","sca_methods":["SmartID","MobileID","SebAPP"],"_links":{"scaStatus":{"href":"/v2/oauth/authorize-decoupled/123authorization"},"selectAuthenticationMethod":{"href":"/v2/oauth/authorize-decoupled/123authorization"}}}

REQUEST 2
PATCH https://api.ob.baltics.sebgroup.com/v2/oauth/authorize-decoupled/123authorization
Accept: application/json
Content-Type: application/json

{"chosen_sca_method":"SmartID"}

RESPONSE 2
200
Content-Type: application/json;charset=utf-8

{"status":"scaMethodSelected","chosen_sca_method":"SmartID","challenge_data":{"href":"3987","code":"3987"},"_links":{"scaStatus":{"href":"/v2/oauth/authorize-decoupled/123authorization"}}}

REQUEST 3
GET https://api.ob.baltics.sebgroup.com/v2/oauth/authorize-decoupled/123authorization
Accept: application/json
Content-Type: application/json

RESPONSE 3 SET A
200
Content-Type: application/json;charset=utf-8

{"status":"started"}

REQUEST 4 MATCH A
GET https://api.ob.baltics.sebgroup.com/v2/oauth/authorize-decoupled/123authorization
Accept: application/json
Content-Type: application/json

RESPONSE 4
200
Content-Type: application/json;charset=utf-8

{"status":"finalized"}

REQUEST 5
POST https://api.ob.baltics.sebgroup.com/v2/oauth/token
Accept: application/json
Content-Type: application/json

{"code":null,"grant_type":"decoupled_authorization","redirect_uri":null,"refresh_token":null,"authorization_id":"123authorization"}

RESPONSE 5
200
Content-Type: application/json;charset=utf-8

{"access_token":"accessToken","token_type":"Bearer","refresh_token":"refreshToken","refresh_token_expires_in":7775999,"expires_in":3599,"scope":"account.lists accounts consents"}

REQUEST 6
GET https://api.ob.baltics.sebgroup.com/v2/account-list
Accept: application/json
Content-Type: application/json

RESPONSE 6
200
Content-Type: application/json;charset=utf-8

{"accounts":[{"iban":"LT551592381537588511","currency":"EUR","name":"Firstname Lastname Banko sąskaita"}]}

REQUEST 7
POST https://api.ob.baltics.sebgroup.com/v2/consents
Accept: application/json
Content-Type: application/json

{"access":{"accounts":[{"iban":"LT551592381537588511"}],"balances":[{"iban":"LT551592381537588511"}],"transactions":[{"iban":"LT551592381537588511"}]},"recurringIndicator":true,"validUntil":"1992-07-09","frequencyPerDay":4}

RESPONSE 7
201
Content-Type: application/json;charset=utf-8

{"consentId":"123consent","consentStatus":"received","_links":{"self":{"href":"/v2/consents/123consent"},"startAuthorisation":{"href":"/v2/consents/123consent/authorizations"},"status":{"href":"/v2/consents/123consent/status"}}}

REQUEST 8
POST https://api.ob.baltics.sebgroup.com/v2/consents/123consent/authorizations
Accept: application/json
Content-Type: application/json

RESPONSE 8
200
Content-Type: application/json;charset=utf-8

{"scaStatus":"received","authorizationId":"456authorization","scaMethods":["Redirect","MobileID","SmartID","SebAPP"],"_links":{"scaStatus":{"href":"/v2/consents/123consent/authorizations/456authorization"},"selectAuthenticationMethod":{"href":"/v2/consents/123consent/authorizations/456authorization"}}}

REQUEST 9
PATCH https://api.ob.baltics.sebgroup.com/v2/consents/123consent/authorizations/456authorization
Accept: application/json
Content-Type: application/json

{"chosenScaMethod":"SmartID"}

RESPONSE 9
200
Content-Type: application/json;charset=utf-8

{"scaStatus":"scaMethodSelected","chosenScaMethod":"SmartID","challengeData":{"href":"5188","code":"5188"},"_links":{"scaStatus":{"href":"/v2/consents/123consent/authorizations/456authorization"}}}

REQUEST 10
GET https://api.ob.baltics.sebgroup.com/v2/consents/123consent/status
Accept: application/json
Content-Type: application/json

RESPONSE 10 SET B
200
Content-Type: application/json;charset=utf-8

{"status":"received","consentStatus":"received"}

REQUEST 11 MATCH B
GET https://api.ob.baltics.sebgroup.com/v2/consents/123consent/status
Accept: application/json
Content-Type: application/json

RESPONSE 11
200
Content-Type: application/json;charset=utf-8

{"status":"valid","consentStatus":"valid"}

REQUEST 12
GET https://api.ob.baltics.sebgroup.com/v2/accounts
Accept: application/json
Content-Type: application/json

RESPONSE 12
200
Content-Type: application/json;charset=utf-8

{"accounts":[{"resourceId":"123resourceid","iban":"LT551592381537588511","currency":"EUR","cashAccountType":"currentAccount","ownerName":"Firstname Lastname","name":"Firstname Lastname Banko sąskaita","_links":{"self":{"href":"/v2/accounts"},"account":{"href":"/v2/accounts/123resourceid"},"balances":{"href":"/v2/accounts/123resourceid/balances"},"transactions":{"href":"/v2/accounts/123resourceid/transactions"}}}]}

REQUEST 13
GET https://api.ob.baltics.sebgroup.com/v2/accounts/123resourceid/balances
Accept: application/json
Content-Type: application/json

RESPONSE 13
200
Content-Type: application/json;charset=utf-8

{"account":{"resourceId":"123resourceid","iban":"LT551592381537588511"},"balances":[{"balanceType":"interimBooked","balanceAmount":{"currency":"EUR","amount":"1852.48"}},{"balanceType":"interimAvailable","balanceAmount":{"currency":"EUR","amount":"1852.48"}}],"_links":{"self":{"href":"/v2/accounts/123resourceid/balances"},"account":{"href":"/v2/accounts/123resourceid"},"transactions":{"href":"/v2/accounts/123resourceid/transactions"}}}

REQUEST 14
GET https://api.ob.baltics.sebgroup.com/v2/accounts/123resourceid/transactions
Accept: application/json
Content-Type: application/json

RESPONSE 14
200
Content-Type: application/json;charset=utf-8

{"account":{"resourceId":"123resourceid","iban":"LT551592381537588511"},"transactions":{"pending":[],"booked":[{"transactionId":"2800009859","transactionAmount":{"currency":"EUR","amount":2000.0},"type":"credit","bookingDate":"2021-06-25","valueDate":"2021-06-25","entryReference":"16246318667611026212","instructedIdentification":"18","endToEndIdentification":"NOTPROVIDED","transactionReferenceNumber":"RO455184910L02","debtorName":"JONAS SATKAUSKAS","debtorAccount":{"iban":"LT576171537889843297"}},{"transactionId":"2800097895","transactionAmount":{"currency":"EUR","amount":10.0},"type":"debit","bookingDate":"2021-06-25","valueDate":"2021-06-25","entryReference":"16246399772581614248","instructedIdentification":"628013765","endToEndIdentification":null,"transactionReferenceNumber":"RO455216884L01","creditorName":"Firstname Lastname","creditorAccount":{"iban":"LT576171537889843297"},"remittanceInformationUnstructured":"Kaupiamasis indėlis"},{"transactionId":"2800235272","transactionAmount":{"currency":"EUR","amount":2.5},"type":"debit","bookingDate":"2021-06-26","valueDate":"2021-06-26","entryReference":"16246610024473951625","instructedIdentification":null,"endToEndIdentification":null,"transactionReferenceNumber":"RO455271897L01","creditorName":"SEB bankas","creditorAccount":{},"remittanceInformationUnstructured":"1566333-SUMANU PLIUS paslaugų planas - Plano sutarties mokestis"},{"transactionId":"2808228319","transactionAmount":{"currency":"EUR","amount":1.6},"type":"debit","bookingDate":"2021-06-29","valueDate":"2021-06-29","entryReference":"16249932868179044672","instructedIdentification":null,"endToEndIdentification":"416248","transactionReferenceNumber":"RO458331345L01","creditorName":"UAB \"TELE2\"","creditorAccount":{"iban":"LT576171537889843297"},"remittanceInformationUnstructured":"mano.tele2.lt/LT, st416248, Tele2 saskaita #302176205#"},{"transactionId":"2830890628","transactionAmount":{"currency":"EUR","amount":92.45},"type":"debit","bookingDate":"2021-07-09","valueDate":"2021-07-09","entryReference":"16257756122908306981","instructedIdentification":"2853187765","endToEndIdentification":"19019","transactionReferenceNumber":"RO466012109L01","creditorName":"ADB  \"Gjensidige\"","creditorAccount":{"iban":"LT576171537889843297"},"remittanceInformationUnstructured":"M2853187766"},{"transactionId":"2837698562","transactionAmount":{"currency":"EUR","amount":8.0},"type":"debit","bookingDate":"2021-07-12","valueDate":"2021-07-12","entryReference":"16260719138904914915","instructedIdentification":"CLR2183313","endToEndIdentification":null,"transactionReferenceNumber":"RO468438186L01","creditorName":"HDS RETAIL GP DOO BEOG\\BUDIMSKA 2             \\BEOGRAD      \\11000     SRBSRB","creditorAccount":{},"remittanceInformationUnstructured":"08/07/2021 18:54 910.00 RSD(7.79 EUR + mokestis 0.21 EUR(2.65%)) kortelė...032220 HDS RETAIL GP DOO BEOG/BEOGRAD/SRB #871672"},{"transactionId":"2846004649","transactionAmount":{"currency":"EUR","amount":10.0},"type":"debit","bookingDate":"2021-07-14","valueDate":"2021-07-14","entryReference":"16262662007099921002","instructedIdentification":"652656967","endToEndIdentification":null,"transactionReferenceNumber":"RO471225589L01","creditorName":"Firstname Lastname","creditorAccount":{"iban":"LT576171537889843297"},"remittanceInformationUnstructured":"Mokėjimas mobiliąja programėle"},{"transactionId":"2850364850","transactionAmount":{"currency":"EUR","amount":6.14},"type":"debit","bookingDate":"2021-07-16","valueDate":"2021-07-16","entryReference":"16264121000947481203","instructedIdentification":"CLR2209725","endToEndIdentification":null,"transactionReferenceNumber":"RO472647848L01","creditorName":"HDS RETAIL GP DOO BEOG\\BUDIMSKA 2             \\BEOGRAD      \\11000     SRBSRB","creditorAccount":{},"remittanceInformationUnstructured":"14/07/2021 18:46 700.00 RSD(5.98 EUR + mokestis 0.16 EUR(2.65%)) kortelė...032220 HDS RETAIL GP DOO BEOG/BEOGRAD/SRB #471213"},{"transactionId":"2855224976","transactionAmount":{"currency":"EUR","amount":6.33},"type":"debit","bookingDate":"2021-07-19","valueDate":"2021-07-19","entryReference":"16266736604405241329","instructedIdentification":"CLR2215267","endToEndIdentification":null,"transactionReferenceNumber":"RO474477846L01","creditorName":"HDS RETAIL GP DOO BEOG\\BUDIMSKA 2             \\BEOGRAD      \\11000     SRBSRB","creditorAccount":{},"remittanceInformationUnstructured":"15/07/2021 19:16 720.00 RSD(6.17 EUR + mokestis 0.16 EUR(2.65%)) kortelė...032220 HDS RETAIL GP DOO BEOG/BEOGRAD/SRB #573009"},{"transactionId":"2862697289","transactionAmount":{"currency":"EUR","amount":10.5},"type":"debit","bookingDate":"2021-07-21","valueDate":"2021-07-21","entryReference":"16268581102495213642","instructedIdentification":"CLR2231921","endToEndIdentification":null,"transactionReferenceNumber":"RO477086117L01","creditorName":"UAB TERASA\\VILNIAUS G. 28-120\\VILNIUS\\UNKNOWN      LTU","creditorAccount":{},"remittanceInformationUnstructured":"20/07/2021 02:46 kortelė...032220 UAB TERASA\\VILNIAUS G. #010026"}]},"_links":{"self":{"href":"/v2/accounts/123resourceid/transactions"},"account":{"href":"/v2/accounts/123resourceid"}}}
