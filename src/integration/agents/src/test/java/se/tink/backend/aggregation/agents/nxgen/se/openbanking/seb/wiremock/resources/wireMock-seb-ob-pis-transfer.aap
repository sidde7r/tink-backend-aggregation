REQUEST 1a
POST https://authorize.sebgroup.com/auth/v3/authorizations
Accept: application/json
Content-Type: application/json

{"client_id":"dummyId","scope":"psd2_accounts psd2_payments","start_mode":"ast"}

RESPONSE 1a
201
Content-Type: application/json
Content-Length: 59

{"auth_req_id":"AUTH-0a9021b6-d022-439e-a22a-7c49429d731e"}

REQUEST 1b
GET https://authorize.sebgroup.com/auth/v3/authorizations/AUTH-0a9021b6-d022-439e-a22a-7c49429d731e
Accept: application/json

RESPONSE ab SET AUTH_01
200
Content-Type: application/json
Content-Length: 132

{"status":"PENDING","hint_code":"OUTSTANDING_TRANSACTION","autostart_token":"59a1b676-2ea1-41ba-b4f9-725634f2dcd1","poll_delay":500}

REQUEST 1c MATCH AUTH_01
GET https://authorize.sebgroup.com/auth/v3/authorizations/AUTH-0a9021b6-d022-439e-a22a-7c49429d731e
Accept: application/json

RESPONSE 1c SET AUTH_02
200
Content-Type: application/json
Content-Length: 61

{"status":"PENDING","hint_code":"USER_SIGN","poll_delay":500}

REQUEST 1d MATCH AUTH_02
GET https://authorize.sebgroup.com/auth/v3/authorizations/AUTH-0a9021b6-d022-439e-a22a-7c49429d731e
Accept: application/json

RESPONSE 1d
200
Content-Type: application/json
Content-Length: 38

{"status":"COMPLETE","poll_delay":500}

REQUEST 1e
POST https://authorize.sebgroup.com/auth/v3/tokens
Accept: application/json
Content-Type: application/json

{"auth_req_id":"AUTH-0a9021b6-d022-439e-a22a-7c49429d731e","client_id":"dummyId","client_secret":"dummySecret","redirect_uri":"https://127.0.0.1:7357/api/v1/thirdparty/callback"}

RESPONSE 1e
200
Content-Type: application/json
Content-Length: 175

{"scope":"psd2_accounts psd2_payments","access_token":"iKoyt6TjdQb67zgn2uhy","refresh_token":"e5l1Ai8XZI4ud12jH1X88z4SN11P3Jrwi0oPVN4X","token_type":"bearer","expires_in":599}

REQUEST 14
POST https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers
Accept: application/json
Content-Type: application/json

{
    "creditorAccount": {
        "bban": "56242222222"
    }, 
    "creditorAccountMessage": null, 
    "creditorName": "Joe Doe",
    "debtorAccount": {
        "iban": "SE4550000000058398257466"
    }, 
    "debtorAccountMessage": null, 
    "instructedAmount": {
        "amount": "1000.0", 
        "currency": "SEK"
    }, 
    "remittanceInformationStructured": null, 
    "remittanceInformationUnstructured": "SBAB-BANK", 
    "requestedExecutionDate": "2021-03-02", 
    "templateId": "swedish-domestic-private-credit-transfers"
}

RESPONSE 14 SET S1
201
Date: Tue, 02 Mar 2021 10:08:12 GMT
Date: Tue, 02 Mar 2021 10:08:13 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "creditorAccount": {
        "bban": "56242222222"
    }, 
    "debtorAccount": {
        "iban": "SE4550000000058398257466"
    }, 
    "instructedAmount": {
        "amount": "1000.0", 
        "currency": "SEK"
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "requestedExecutionDate": "2021-03-02", 
    "templateId": "swedish-domestic-private-credit-transfers"
}

REQUEST 15 MATCH S1
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 15 SET S2
200
Date: Tue, 02 Mar 2021 10:08:13 GMT
Date: Tue, 02 Mar 2021 10:08:13 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "transactionStatus": "RCVD"
}

REQUEST 16 MATCH S2
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 16 SET STATE20
200
Date: Tue, 02 Mar 2021 10:08:13 GMT
Date: Tue, 02 Mar 2021 10:08:14 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "startAuthorisationWithAuthenticationMethodSelection": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/authorisations"
        }, 
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "scaMethods": [
        {
            "authenticationMethodId": "mobiltbankid", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using decoupled approach", 
            "name": "Mobilt BankID"
        }, 
        {
            "authenticationMethodId": "digipass", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using Redirect to SEB pages", 
            "name": "Digipass"
        }, 
        {
            "authenticationMethodId": "bankIdOnCardDecoupled", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using BankId on card, a domestic Swedish authentication method. Decoupled approach", 
            "name": "BankID p\u00e5 kort"
        }
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 17 MATCH STATE20
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 17 SET STATE21
200
Date: Tue, 02 Mar 2021 10:08:14 GMT
Date: Tue, 02 Mar 2021 10:08:15 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "startAuthorisationWithAuthenticationMethodSelection": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/authorisations"
        }, 
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "scaMethods": [
        {
            "authenticationMethodId": "mobiltbankid", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using decoupled approach", 
            "name": "Mobilt BankID"
        }, 
        {
            "authenticationMethodId": "digipass", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using Redirect to SEB pages", 
            "name": "Digipass"
        }, 
        {
            "authenticationMethodId": "bankIdOnCardDecoupled", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using BankId on card, a domestic Swedish authentication method. Decoupled approach", 
            "name": "BankID p\u00e5 kort"
        }
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 18 MATCH STATE21
POST https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/authorisations
Accept: application/json
Content-Type: application/json

{
    "authenticationMethodId": "mobiltbankid"
}

RESPONSE 18 SET STATE22
201
Date: Tue, 02 Mar 2021 10:08:15 GMT
Date: Tue, 02 Mar 2021 10:08:15 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "self": {
            "href": "/signing-baskets/2820e2f2-7740-41ae-888c-8b744805604e/authorisations/83bb7108-b5fd-4a52-9f6b-b96ed39e0b07"
        }
    }, 
    "authorisationId": "83bb7108-b5fd-4a52-9f6b-b96ed39e0b07", 
    "basketId": "2820e2f2-7740-41ae-888c-8b744805604e", 
    "chosenScaMethod": {
        "authenticationMethodId": "mobiltbankid", 
        "authenticationType": "CHIP_OTP", 
        "explanation": "SCA using decoupled approach", 
        "name": "Mobilt BankID"
    }, 
    "paymentIds": [
        "STOHYD01210302110813163757000001"
    ], 
    "scaStatus": "scaMethodSelected"
}

REQUEST 19 MATCH STATE22
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 19 SET STATE23
200
Date: Tue, 02 Mar 2021 10:08:15 GMT
Date: Tue, 02 Mar 2021 10:08:16 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "psuMessage": "Signera med mobilt BankID", 
    "scaStatus": "started", 
    "tppMessages": [
        "Ask the customer to sign for the payment with mobile BankId application"
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 20 MATCH STATE23
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 20 SET STATE24
200
Date: Tue, 02 Mar 2021 10:08:17 GMT
Date: Tue, 02 Mar 2021 10:08:18 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "psuMessage": "Signera med mobilt BankID", 
    "scaStatus": "started", 
    "tppMessages": [
        "Ask the customer to sign for the payment with mobile BankId application"
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 21 MATCH STATE24
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 21 SET STATE25
200
Date: Tue, 02 Mar 2021 10:08:20 GMT
Date: Tue, 02 Mar 2021 10:08:20 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "psuMessage": "Signera med mobilt BankID", 
    "scaStatus": "started", 
    "tppMessages": [
        "Ask the customer to sign for the payment with mobile BankId application"
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 22 MATCH STATE25
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 22 SET STATE26
200
Date: Tue, 02 Mar 2021 10:08:22 GMT
Date: Tue, 02 Mar 2021 10:08:23 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "psuMessage": "Signera med mobilt BankID", 
    "scaStatus": "started", 
    "tppMessages": [
        "Ask the customer to sign for the payment with mobile BankId application"
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 23 MATCH STATE26
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 23 SET STATE27
200
Date: Tue, 02 Mar 2021 10:08:25 GMT
Date: Tue, 02 Mar 2021 10:08:26 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "psuMessage": "Signera med mobilt BankID", 
    "scaStatus": "started", 
    "tppMessages": [
        "Ask the customer to sign for the payment with mobile BankId application"
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 24 MATCH STATE27
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 24 SET STATE28
200
Date: Tue, 02 Mar 2021 10:08:28 GMT
Date: Tue, 02 Mar 2021 10:08:28 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "psuMessage": "Signera med mobilt BankID", 
    "scaStatus": "started", 
    "tppMessages": [
        "Ask the customer to sign for the payment with mobile BankId application"
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 25 MATCH STATE28
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 25 SET STATE29
200
Date: Tue, 02 Mar 2021 10:08:30 GMT
Date: Tue, 02 Mar 2021 10:08:31 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "psuMessage": "Signera med mobilt BankID", 
    "scaStatus": "started", 
    "tppMessages": [
        "Ask the customer to sign for the payment with mobile BankId application"
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 26 MATCH STATE29
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 26 SET STATE30
200
Date: Tue, 02 Mar 2021 10:08:33 GMT
Date: Tue, 02 Mar 2021 10:08:32 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "startAuthorisationWithAuthenticationMethodSelection": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/authorisations"
        }, 
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "scaMethods": [
        {
            "authenticationMethodId": "mobiltbankid", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using decoupled approach", 
            "name": "Mobilt BankID"
        }, 
        {
            "authenticationMethodId": "digipass", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using Redirect to SEB pages", 
            "name": "Digipass"
        }, 
        {
            "authenticationMethodId": "bankIdOnCardDecoupled", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using BankId on card, a domestic Swedish authentication method. Decoupled approach", 
            "name": "BankID p\u00e5 kort"
        }
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 27 MATCH STATE30
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 27 SET STATE31
200
Date: Tue, 02 Mar 2021 10:08:35 GMT
Date: Tue, 02 Mar 2021 10:08:36 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "chosenScaMethod": {
        "authenticationMethodId": "mobiltbankid", 
        "authenticationType": "CHIP_OTP", 
        "explanation": "SCA using decoupled approach", 
        "name": "Mobilt BankID"
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "transactionStatus": "ACTC"
}

REQUEST 28 MATCH STATE31
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 28 SET STATE32
200
Date: Tue, 02 Mar 2021 10:08:36 GMT
Date: Tue, 02 Mar 2021 10:08:36 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "chosenScaMethod": {
        "authenticationMethodId": "mobiltbankid", 
        "authenticationType": "CHIP_OTP", 
        "explanation": "SCA using decoupled approach", 
        "name": "Mobilt BankID"
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "transactionStatus": "ACTC"
}
