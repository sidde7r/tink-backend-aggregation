REQUEST 1a
POST https://authorize.sebgroup.com/auth/v3/authorizations
Accept: application/json
Content-Type: application/json

{"client_id":"dummyId","scope":"psd2_accounts psd2_payments","start_mode":"ast"}

RESPONSE 1a
201
Content-Type: application/json
Content-Length: 59

{"auth_req_id":"AUTH-0a9021b6-d022-439e-a22a-7c49429d731e"}

REQUEST 1b
GET https://authorize.sebgroup.com/auth/v3/authorizations/AUTH-0a9021b6-d022-439e-a22a-7c49429d731e
Accept: application/json

RESPONSE ab SET AUTH_01
200
Content-Type: application/json
Content-Length: 132

{"status":"PENDING","hint_code":"OUTSTANDING_TRANSACTION","autostart_token":"59a1b676-2ea1-41ba-b4f9-725634f2dcd1","poll_delay":500}

REQUEST 1c MATCH AUTH_01
GET https://authorize.sebgroup.com/auth/v3/authorizations/AUTH-0a9021b6-d022-439e-a22a-7c49429d731e
Accept: application/json

RESPONSE 1c SET AUTH_02
200
Content-Type: application/json
Content-Length: 61

{"status":"PENDING","hint_code":"USER_SIGN","poll_delay":500}

REQUEST 1d MATCH AUTH_02
GET https://authorize.sebgroup.com/auth/v3/authorizations/AUTH-0a9021b6-d022-439e-a22a-7c49429d731e
Accept: application/json

RESPONSE 1d
200
Content-Type: application/json
Content-Length: 38

{"status":"COMPLETE","poll_delay":500}

REQUEST 1e
POST https://authorize.sebgroup.com/auth/v3/tokens
Accept: application/json
Content-Type: application/json

{"auth_req_id":"AUTH-0a9021b6-d022-439e-a22a-7c49429d731e","client_id":"dummyId","client_secret":"dummySecret","redirect_uri":"https://127.0.0.1:7357/api/v1/thirdparty/callback"}

RESPONSE 1e
200
Content-Type: application/json
Content-Length: 175

{"scope":"psd2_accounts psd2_payments","access_token":"iKoyt6TjdQb67zgn2uhy","refresh_token":"e5l1Ai8XZI4ud12jH1X88z4SN11P3Jrwi0oPVN4X","token_type":"bearer","expires_in":599}

REQUEST 9
POST https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-bankgiros
Accept: application/json
Content-Type: application/json

{
    "creditorAccount": {
        "bgnr": "5768353"
    }, 
    "creditorAccountMessage": null, 
    "creditorName": "Tink",
    "debtorAccount": {
        "iban": "SE4550000000058398257466"
    }, 
    "debtorAccountMessage": null, 
    "instructedAmount": {
        "amount": "585.57",
        "currency": "SEK"
    }, 
    "remittanceInformationStructured": {
        "reference": "1047514784933",
        "referenceType": "OCR"
    }, 
    "remittanceInformationUnstructured": null, 
    "requestedExecutionDate": "2021-01-21",
    "templateId": "swedish-domestic-private-bankgiros"
}

RESPONSE 9 SET STATE9
201
Date: Thu, 25 Feb 2021 00:32:24 GMT
Date: Thu, 25 Feb 2021 00:32:25 GMT
Content-Type: application/json

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-bankgiros/STOHYD01210225013225147906000001/status"
        }
    }, 
    "creditorAccount": {
        "bgnr": "3394012"
    }, 
    "debtorAccount": {
        "iban": "SE6450000000056240346527"
    }, 
    "instructedAmount": {
        "amount": "5493.0", 
        "currency": "SEK"
    }, 
    "paymentId": "STOHYD01210225013225147906000001", 
    "remittanceInformationStructured": {
        "reference": "1252496508", 
        "referenceType": "OCR"
    }, 
    "requestedExecutionDate": "2021-02-25", 
    "templateId": "swedish-domestic-private-bankgiros"
}

REQUEST 2 MATCH STATE9
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-bankgiros/STOHYD01210225013225147906000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 2 SET STATE10
200
Date: Thu, 25 Feb 2021 00:32:25 GMT
Date: Thu, 25 Feb 2021 00:32:25 GMT
Content-Type: application/json

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-bankgiros/STOHYD01210225013225147906000001/status"
        }
    }, 
    "paymentId": "STOHYD01210225013225147906000001", 
    "transactionStatus": "RCVD"
}

REQUEST 3 MATCH STATE10
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-bankgiros/STOHYD01210225013225147906000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 3
200
Date: Thu, 25 Feb 2021 00:32:25 GMT
Date: Thu, 25 Feb 2021 00:32:25 GMT
Content-Type: application/json

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-bankgiros/STOHYD01210225013225147906000001/status"
        }
    }, 
    "paymentId": "STOHYD01210225013225147906000001", 
    "tppMessages": [
        "A similar payment is already in upcoming events."
    ], 
    "transactionStatus": "RJCT"
}
