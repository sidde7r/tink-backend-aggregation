
REQUEST 1
GET https://api.monzo.com/open-banking/.well-known/openid-configuration
x-fapi-financial-id: 001580000103U9RAAU

RESPONSE 1
200
Content-Type: application/json

{
    "issuer": "https://api.monzo.com/open-banking/",
    "registration_endpoint": "https://openbanking.monzo.com/oauth2/register",
    "authorization_endpoint": "https://verify.monzo.com/open-banking/authorize",
    "token_endpoint": "https://openbanking.monzo.com/oauth2/token",
    "token_endpoint_auth_methods_supported": [
        "tls_client_auth"
    ],
    "jwks_uri": "https://keystore.openbanking.org.uk/001580000103U9RAAU/KM71NjuERWSOVWbve6UWqg.jwks",
    "scopes_supported": [
        "payments",
        "openid",
        "accounts"
    ],
    "claims_supported": [
        "openbanking_intent_id",
        "sub",
        "acr"
    ],
    "response_types_supported": [
        "code id_token"
    ],
    "subject_types_supported": [
        "public"
    ],
    "grant_types_supported": [
        "authorization_code",
        "client_credentials",
        "refresh_token"
    ],
    "id_token_signing_alg_values_supported": [
        "PS256"
    ],
    "id_token_encryption_alg_values_supported": [
        "PS256"
    ],
    "response_modes_supported": [
        "fragment"
    ],
    "request_object_signing_alg_values_supported": [
        "PS256"
    ],
    "request_parameter_supported": true,
    "claims_parameter_supported": true
}

REQUEST 2
POST https://openbanking.monzo.com/oauth2/token
Content-Type: application/x-www-form-urlencoded
Accept: application/json

grant_type=client_credentials
    &scope=accounts
    &redirect_uri=https%3A%2F%2F127.0.0.1%3A7357%2Fapi%2Fv1%2Fthirdparty%2Fcallback
    &client_id=DUMMY_CLIENT_ID

RESPONSE 2
200
Content-Type: application/json;charset=utf-8

{
    "access_token": "DUMMY_CLIENT_TOKEN",
    "token_type": "bearer",
    "expires_in": 599
}

REQUEST 3
GET https://openbanking.monzo.com/open-banking/v3.1/aisp/account-access-consents/DUMMY_CONSENT_ID
Accept: application/json
Content-Type: application/json
Authorization: Bearer DUMMY_CLIENT_TOKEN
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

RESPONSE 3
201
Content-Type: application/json; charset=utf-8
Connection: keep-alive
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

{
    "Data": {
        "ConsentId": "DUMMY_CONSENT_ID",
        "Permissions": [
                    "ReadAccountsDetail",
                    "ReadTransactionsCredits",
                    "ReadDirectDebits",
                    "ReadTransactionsDebits",
                    "ReadBeneficiariesDetail",
                    "ReadBalances",
                    "ReadStandingOrdersDetail",
                    "ReadTransactionsDetail"
        ],
        "CreationDateTime": "2021-02-18T14:40:42.485Z",
        "StatusUpdateDateTime": "2021-02-18T14:40:42.485Z",
        "Status": "Authorised"
    },
    "Risk": {},
    "Links": {
        "Self": "https://api.ulsterbank.co.uk/open-banking/v3.1/aisp/account-access-consents/DUMMY_CONSENT_ID"
    },
    "Meta": {}
}

REQUEST 4
POST https://openbanking.monzo.com/oauth2/token
Content-Type: application/x-www-form-urlencoded
Accept: application/json

grant_type=refresh_token
    &scope=accounts
    &redirect_uri=https%3A%2F%2F127.0.0.1%3A7357%2Fapi%2Fv1%2Fthirdparty%2Fcallback
    &client_id=DUMMY_CLIENT_ID
    &refresh_token=DUMMY_REFRESH_TOKEN

RESPONSE 4
200
Content-Type: application/json; charset=UTF-8

{
    "access_token": "DUMMY_ACCESS_TOKEN",
    "token_type": "Bearer",
    "expires_in": 3600,
    "refresh_token": "DUMMY_REFRESH_TOKEN",
    "scope": "openid accounts"
}

REQUEST 5
GET https://openbanking.monzo.com/open-banking/v3.1/aisp/party
Authorization: Bearer DUMMY_ACCESS_TOKEN
Accept: application/json
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

RESPONSE 5
200
Content-Type: application/json; charset=UTF-8
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

{
    "code": "forbidden.sca_expired",
    "message": "This consent's approval has exceeded the SCA expiry window, reading /party is not authorised",
    "params": {
        "consent_id": "obaispaccountinformationconsent_0000A0FueVOLu8BPbqT9E1"
    },
    "retryable": {}
}