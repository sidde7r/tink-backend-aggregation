REQUEST 1
GET https://personal.secure1.ulsterbank.co.uk/.well-known/openid-configuration

RESPONSE 1
200
Content-Type: application/json

{
    "version": "3.0",
    "issuer": "https://secure1.ulsterbank.co.uk",
    "authorization_endpoint": "https://personal.secure1.ulsterbank.co.uk/as/authorization.oauth2",
    "token_endpoint": "https://secure1t.ulsterbank.co.uk/as/token.oauth2",
    "revocation_endpoint": "https://secure1.ulsterbank.co.uk/as/revoke_token.oauth2",
    "jwks_uri": "https://keystore.openbanking.org.uk/0015800000jfxrpAAA/57ilfAN22WYnhY7DJRjW7i.jwks",
    "registration_endpoint": "https://secure1t.ulsterbank.co.uk/open-banking/v1.0/tpp/register",
    "scopes_supported": [
        "openid",
        "payments",
        "accounts",
        "fundsconfirmations"
    ],
    "claims_supported": [
        "aud",
        "exp",
        "iat",
        "iss",
        "openbanking_intent_id",
        "sub",
        "acr"
    ],
    "acr_values_supported": [
        "urn:openbanking:psd2:ca"
    ],
    "response_types_supported": [
        "code id_token"
    ],
    "response_modes_supported": [
        "fragment",
        "query",
        "form_post"
    ],
    "grant_types_supported": [
        "authorization_code",
        "refresh_token",
        "client_credentials"
    ],
    "subject_types_supported": [
        "public"
    ],
    "id_token_signing_alg_values_supported": [
        "HS256",
        "HS384",
        "HS512",
        "RS256",
        "PS256",
        "RS384",
        "RS512",
        "ES256",
        "ES384",
        "ES512"
    ],
    "token_endpoint_auth_methods_supported": [
        "tls_client_auth",
        "private_key_jwt"
    ],
    "tls_client_certificate_bound_access_tokens": true,
    "token_endpoint_auth_signing_alg_values_supported": [
        "RS256",
        "PS256",
        "RS384",
        "RS512",
        "ES256",
        "ES384",
        "ES512"
    ],
    "claim_types_supported": [
        "normal"
    ],
    "claims_parameter_supported": true,
    "request_parameter_supported": true,
    "request_uri_parameter_supported": false,
    "request_object_signing_alg_values_supported": [
        "RS256",
        "PS256",
        "RS384",
        "RS512",
        "ES256",
        "ES384",
        "ES512"
    ],
    "request_object_encryption_alg_values_supported": [],
    "request_object_encryption_enc_values_supported": []
}

REQUEST 2
POST https://secure1t.ulsterbank.co.uk/as/token.oauth2
Content-Type: application/x-www-form-urlencoded
Accept: application/json

grant_type=client_credentials
    &scope=accounts
    &redirect_uri=https%3A%2F%2Fapi.tink.se%2Fapi%2Fv1%2Fcredentials%2Fthird-party%2Fcallback
    &client_id=DUMMY_CLIENT_ID
    &client_assertion_type=urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwt-bearer
    &client_assertion=RkFLRV9TSUdOQVRVUkUK

RESPONSE 2
200
Content-Type: application/json;charset=utf-8

{
    "access_token": "DUMMY_CLIENT_TOKEN",
    "token_type": "bearer",
    "expires_in": 599
}

REQUEST 3
GET https://api.ulsterbank.co.uk/open-banking/v3.1/aisp/account-access-consents/DUMMY_CONSENT_ID
Accept: application/json
Content-Type: application/json
Authorization: Bearer DUMMY_CLIENT_TOKEN
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

RESPONSE 3
201
Content-Type: application/json; charset=utf-8
Connection: keep-alive
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

{
    "Data": {
        "ConsentId": "DUMMY_CONSENT_ID",
        "Permissions": [
                    "ReadAccountsDetail",
                    "ReadTransactionsCredits",
                    "ReadDirectDebits",
                    "ReadTransactionsDebits",
                    "ReadBeneficiariesDetail",
                    "ReadBalances",
                    "ReadStandingOrdersDetail",
                    "ReadTransactionsDetail"
        ],
        "CreationDateTime": "2021-02-18T14:40:42.485Z",
        "StatusUpdateDateTime": "2021-02-18T14:40:42.485Z",
        "Status": "Authorised"
    },
    "Risk": {},
    "Links": {
        "Self": "https://api.ulsterbank.co.uk/open-banking/v3.1/aisp/account-access-consents/DUMMY_CONSENT_ID"
    },
    "Meta": {}
}

REQUEST 4
GET https://api.ulsterbank.co.uk/open-banking/v3.1/aisp/accounts
Accept: application/json
Authorization: Bearer DUMMY_ACCESS_TOKEN
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

RESPONSE 4
200
Content-Type: application/json; charset=utf-8
Connection: keep-alive
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

{
    "Data": {
        "Account": [
            {
                "AccountId": "G2D1D0435A72E536337E3914E0983542",
                "Currency": "GBP",
                "AccountType": "Personal",
                "AccountSubType": "Savings",
                "Description": "LOYALTY SAVER",
                "Account": [
                    {
                        "SchemeName": "UK.OBIE.SortCodeAccountNumber",
                        "Identification": "11111111111111",
                        "Name": "JANUSZ TRACZ"
                    }
                ]
            },
            {
                "AccountId": "A435AFAB0E93D88ABDE56D062D9E6F47",
                "Currency": "GBP",
                "AccountType": "Personal",
                "AccountSubType": "CurrentAccount",
                "Description": "U FIRST GOLD",
                "Account": [
                    {
                        "SchemeName": "UK.OBIE.SortCodeAccountNumber",
                        "Identification": "22222222222222",
                        "Name": "JANUSZ TRACZ"
                    }
                ]
            }
        ]
    },
    "Links": {
        "Self": "https://api.ulsterbank.co.uk/open-banking/v3.1/aisp/accounts"
    },
    "Meta": {}
}

REQUEST 5
GET https://api.ulsterbank.co.uk/open-banking/v3.1/aisp/accounts/A435AFAB0E93D88ABDE56D062D9E6F47/balances
Accept: application/json
Authorization: Bearer DUMMY_ACCESS_TOKEN
x-Fapi-Interaction-Id: 00000000-0000-4000-0000-000000000000

RESPONSE 5
200
Content-Type: application/json; charset=utf-8
Connection: keep-alive
x-Fapi-Interaction-Id: 00000000-0000-4000-0000-000000000000

{
    "Data": {
        "Balance": [
            {
                "AccountId": "A435AFAB0E93D88ABDE56D062D9E6F47",
                "Amount": {
                    "Amount": "2884.38",
                    "Currency": "GBP"
                },
                "CreditDebitIndicator": "Credit",
                "Type": "Expected",
                "CreditLine": [
                    {
                        "Included": false,
                        "Amount": {
                            "Amount": "2500.00",
                            "Currency": "GBP"
                        },
                        "Type": "Pre-Agreed"
                    },
                    {
                        "Included": false,
                        "Amount": {
                            "Amount": "2500.00",
                            "Currency": "GBP"
                        },
                        "Type": "Available"
                    }
                ],
                "DateTime": "2021-02-08T14:43:32.971Z"
            },
            {
                "AccountId": "A435AFAB0E93D88ABDE56D062D9E6F47",
                "Amount": {
                    "Amount": "3134.79",
                    "Currency": "GBP"
                },
                "CreditDebitIndicator": "Credit",
                "Type": "ForwardAvailable",
                "CreditLine": [
                    {
                        "Included": false,
                        "Amount": {
                            "Amount": "2500.00",
                            "Currency": "GBP"
                        },
                        "Type": "Pre-Agreed"
                    },
                    {
                        "Included": false,
                        "Amount": {
                            "Amount": "2500.00",
                            "Currency": "GBP"
                        },
                        "Type": "Available"
                    }
                ],
                "DateTime": "2021-02-08T14:43:32.971Z"
            }
        ]
    },
    "Links": {
        "Self": "https://api.ulsterbank.co.uk/open-banking/v3.1/aisp/accounts/A435AFAB0E93D88ABDE56D062D9E6F47/balances"
    },
    "Meta": {}
}

REQUEST 6
GET https://api.ulsterbank.co.uk/open-banking/v3.1/aisp/accounts/G2D1D0435A72E536337E3914E0983542/balances
Accept: application/json
Authorization: Bearer DUMMY_ACCESS_TOKEN
x-Fapi-Interaction-Id: 00000000-0000-4000-0000-000000000000

RESPONSE 6
200
Content-Type: application/json; charset=utf-8
Connection: keep-alive
x-Fapi-Interaction-Id: 00000000-0000-4000-0000-000000000000

{
    "Data": {
        "Balance": [
            {
                "AccountId": "G2D1D0435A72E536337E3914E0983542",
                "Amount": {
                    "Amount": "3255.64",
                    "Currency": "GBP"
                },
                "CreditDebitIndicator": "Credit",
                "Type": "Expected",
                "DateTime": "2021-02-08T14:43:31.907Z"
            },
            {
                "AccountId": "G2D1D0435A72E536337E3914E0983542",
                "Amount": {
                    "Amount": "3255.64",
                    "Currency": "GBP"
                },
                "CreditDebitIndicator": "Credit",
                "Type": "ForwardAvailable",
                "DateTime": "2021-02-08T14:43:31.907Z"
            }
        ]
    },
    "Links": {
        "Self": "https://api.ulsterbank.co.uk/open-banking/v3.1/aisp/accounts/G2D1D0435A72E536337E3914E0983542/balances"
    },
    "Meta": {}
}
