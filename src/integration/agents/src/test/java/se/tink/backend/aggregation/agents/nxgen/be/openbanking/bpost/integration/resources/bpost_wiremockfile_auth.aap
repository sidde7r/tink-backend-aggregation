
-----------------------------------------------------------------------------------
REQUEST 1
POST https://api.psd2.bpostbank.be/berlingroup/v1/consents
Accept: application/json
Content-Type: application/json
PSU-IP-ADDRESS: 127.0.0.1
TPP-Redirect-URI: https://api.tink.se/api/v1/credentials/third-party/callback

{
  "access": {
    "allPsd2": "allAccounts"
  },
  "recurringIndicator": true,
  "validUntil": "1992-07-08",
  "frequencyPerDay": 4,
  "combinedServiceIndicator": false
}

-----------------------------------------------------------------------------------
RESPONSE 1
201
Date: Tue, 12 Oct 2021 10:55:29 GMT
Date: Tue, 12 Oct 2021 10:55:29 GMT
Content-Type: application/json;charset=utf-8
ASPSP-SCA-Approach: ***
Location: ***
X-Content-Type-Options: nosniff
Expires: 0
X-Frame-Options: DENY
Content-Length: 664

{

  "consentStatus" : "received",

  "consentId" : "DUMMY_CONSENT_ID",

  "_links" : {

    "scaOAuth" : {

      "href" : "https://api.psd2.bpostbank.be/berlingroup/.well-known/openid-configuration?authorizationId=DUMMY_AUTH_ID"

    },

    "scaStatus" : {

      "href" : "https://api.psd2.bpostbank.be/berlingroup/v1/consents/DUMMY_CONSENT_ID/authorisations/DUMMY_AUTH_ID"

    },

    "status" : {

      "href" : "https://api.psd2.bpostbank.be/berlingroup/v1/consents/DUMMY_CONSENT_ID/status"

    },

    "self" : {

      "href" : "https://api.psd2.bpostbank.be/berlingroup/v1/consents/DUMMY_CONSENT_ID"

    }

  }

}

-----------------------------------------------------------------------------------
REQUEST 2
GET https://api.psd2.bpostbank.be/berlingroup/.well-known/openid-configuration?authorizationId=DUMMY_AUTH_ID
Accept: application/json

-----------------------------------------------------------------------------------
RESPONSE 2
200
Date: Tue, 12 Oct 2021 10:55:29 GMT
Date: Tue, 12 Oct 2021 10:55:29 GMT
Content-Type: application/json;charset=utf-8
X-Content-Type-Options: nosniff
Expires: 0
X-Frame-Options: DENY
Content-Length: 613

{

  "issuer" : "https://api.psd2.bpostbank.be",

  "authorization_endpoint" : "https://auth.psd2.bpostbank.be/public/berlingroup/authorize/DUMMY_AUTH_ID",

  "token_endpoint" : "https://api.psd2.bpostbank.be/berlingroup/v1/token",

  "userinfo_endpoint" : "https://api.psd2.bpostbank.be/berlingroup/v1/accounts",

  "scopes_supported" : [ "account", "payment" ],

  "response_types_supported" : [ "code" ],

  "grant_types_supported" : [ "client_credentials", "authorization_code", "refresh_token" ],

  "code_challenge_methods_supported" : [ "S256" ],

  "subject_types_supported" : [ "public" ]

}

-----------------------------------------------------------------------------------
REQUEST 3
POST https://api.psd2.bpostbank.be/berlingroup/v1/token
Accept: application/json
Content-Type: application/x-www-form-urlencoded

client_id=PSDSE-FINA-44059&grant_type=authorization_code&code=DUMMY_CODE&redirect_uri=https%3A%2F%2Fapi.tink.se%2Fapi%2Fv1%2Fcredentials%2Fthird-party%2Fcallback&valid_request=true

-----------------------------------------------------------------------------------
RESPONSE 3
200
Date: Tue, 12 Oct 2021 10:55:57 GMT
Date: Tue, 12 Oct 2021 10:55:57 GMT
Content-Type: application/json;charset=utf-8
X-Content-Type-Options: nosniff
Expires: 0
X-Frame-Options: DENY
Content-Length: 329

{

  "access_token" : "DUMMY_TOKEN",

  "token_type" : "Bearer",

  "expires_in" : 900,

  "refresh_token" : "DUMMY_REFRESH_TOKEN",

  "scope" : "AIS"

}

-----------------------------------------------------------------------------------
REQUEST 4
GET https://api.psd2.bpostbank.be/berlingroup/v1/consents/DUMMY_CONSENT_ID
Accept: application/json
Content-Type: application/json

-----------------------------------------------------------------------------------
RESPONSE 4
200
Date: Tue, 12 Oct 2021 10:55:57 GMT
Date: Tue, 12 Oct 2021 10:55:58 GMT
Content-Type: application/json;charset=utf-8
X-Content-Type-Options: nosniff
Expires: 0
X-Frame-Options: DENY
Content-Length: 356

{

  "access" : {

    "allPsd2" : "allAccounts"

  },

  "recurringIndicator" : true,

  "validUntil" : "2022-01-09",

  "frequencyPerDay" : 4,

  "lastActionDate" : "2021-10-12",

  "combinedServiceIndicator" : false,

  "consentStatus" : "valid",

  "_links" : {

    "account" : {

      "href" : "https://api.psd2.bpostbank.be/berlingroup/v1/berlingroup/v1/accounts"

    }

  }

}