REQUEST 1
GET https://xs2a.tech26.de/oauth2/authorize

RESPONSE 1
302
Date: Sun, 10 Jan 2021 09:52:52 GMT
Date: Sun, 10 Jan 2021 09:52:52 GMT
Server: envoy
Expires: 0
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
Pragma: no-cache
Location: https://app.n26.com/login?authType=XS2A&redirect=%2Fopen-banking%3FrequestId%3Dbb7208b6-a9c0-45c0-a394-36cc589e4a50%26state%3D9d7073ad-4599-44c9-9c7b-29d88f32feed%26authType%3DXS2A%26scope%3DDEDICATED_AISP&requestId=requestId&scope=DEDICATED_AISP&state=state
x-frame-options: DENY
x-frame-options: DENY
x-frame-options: SAMEORIGIN
x-frame-options: DENY
x-content-type-options: nosniff
x-content-type-options: nosniff
x-content-type-options: nosniff
x-content-type-options: nosniff
x-request-id: 7de0fd82-b2b2-4828-9838-90679a5ea30c
x-envoy-upstream-service-time: *** MASKED ***
Content-Length: 0

REQUEST 2
POST https://xs2a.tech26.de/oauth2/token?role=DEDICATED_AISP
Content-Type: application/x-www-form-urlencoded
X-Aggregator: Tink Testing

RESPONSE 2
200
Date: Sun, 10 Jan 2021 09:53:15 GMT
Date: Sun, 10 Jan 2021 09:53:15 GMT
Content-Type: application/json;charset=utf-8
Server: envoy
Vary: Accept-Encoding
Cache-Control: no-store
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
Pragma: no-cache
x-frame-options: DENY
x-frame-options: DENY
x-frame-options: SAMEORIGIN
x-frame-options: DENY
x-content-type-options: nosniff
x-content-type-options: nosniff
x-content-type-options: nosniff
x-content-type-options: nosniff
x-request-id: ece2a5c1-b256-4c7a-b27e-86de64d9037a
x-envoy-upstream-service-time: *** MASKED ***
Transfer-Encoding: chunked

{
  "access_token": "atkn",
  "token_type": "bearer",
  "refresh_token": "rtkn",
  "expires_in": 899,
  "host_url": "https://api.tech26.de"
}

REQUEST 3
POST https://xs2a.tech26.de/v1/berlin-group/v1/consents
Content-Type: application/json
Authorization: Bearer atkn
X-Aggregator: Tink Testing

{
  "access": {
    "allPsd2": "allAccountsWithOwnerName"
  },
  "recurringIndicator": true,
  "frequencyPerDay": 4,
  "combinedServiceIndicator": false
}
RESPONSE 3
201
Date: Sun, 10 Jan 2021 09:53:16 GMT
Date: Sun, 10 Jan 2021 09:53:16 GMT
Content-Type: application/json
Server: envoy
aspsp-sca-approach: *** MASKED ***
x-content-type-options: nosniff
x-content-type-options: nosniff
x-content-type-options: nosniff
x-frame-options: DENY
x-frame-options: SAMEORIGIN
x-frame-options: DENY
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
x-request-id: 63393917-88b4-4357-891a-94e30057dbda
x-envoy-upstream-service-time: *** MASKED ***
Transfer-Encoding: chunked

{
  "consentStatus": "received",
  "consentId": "consentId",
  "_links": {
    "status": {
      "href": "/v1/berlin-group/v1/consents/consentId/status"
    },
    "scaStatus": {
      "href": "/v1/berlin-group/v1/consents/consentId/authorisations/f9403989-f15b-4362-8040-6d857eda218e"
    }
  }
}

REQUEST 4
GET https://xs2a.tech26.de/v1/berlin-group/v1/consents/consentId
Authorization: Bearer atkn
X-Aggregator: Tink Testing

RESPONSE 4
200
Date: Sun, 10 Jan 2021 09:53:30 GMT
Date: Sun, 10 Jan 2021 09:53:30 GMT
Content-Type: application/json
Server: envoy
Vary: Accept-Encoding
x-content-type-options: nosniff
x-content-type-options: nosniff
x-content-type-options: nosniff
x-frame-options: DENY
x-frame-options: SAMEORIGIN
x-frame-options: DENY
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
x-request-id: f5841d89-12d0-4dd2-9126-23b9f5b870c2
x-envoy-upstream-service-time: *** MASKED ***
Transfer-Encoding: chunked

{
  "access": {
    "allPsd2": "allAccountsWithOwnerName"
  },
  "recurringIndicator": true,
  "validUntil": "2020-11-01",
  "frequencyPerDay": 4,
  "lastActionDate": "2020-08-03",
  "consentStatus": "valid",
  "_links": {
    "account": {
      "href": "/v1/berlin-group/v1/accounts"
    }
  }
}

REQUEST 5
GET https://xs2a.tech26.de/v1/berlin-group/v1/accounts
Accept: application/json
Content-Type: application/json
Authorization: Bearer atkn
Consent-Id: consentId
PSU-IP-ADDRESS: 127.0.0.1
X-Aggregator: Tink Testing

RESPONSE 5
200
Date: Sun, 10 Jan 2021 09:53:30 GMT
Date: Sun, 10 Jan 2021 09:53:30 GMT
Content-Type: application/json
Server: envoy
Vary: Accept-Encoding
x-content-type-options: nosniff
x-content-type-options: nosniff
x-content-type-options: nosniff
x-frame-options: DENY
x-frame-options: SAMEORIGIN
x-frame-options: DENY
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
x-envoy-upstream-service-time: *** MASKED ***
Transfer-Encoding: chunked

{
  "accounts": [
    {
      "resourceId": "resourceId",
      "iban": "IBAN",
      "currency": "EUR",
      "product": "Main Account",
      "name": "Main Account",
      "bic": "BIC",
      "cashAccountType": "CACC",
      "status": "enabled",
      "usage": "PRIV",
      "ownerName": "Owner  Name",
      "_links": {
        "balances": {
          "href": "/v1/berlin-group/v1/accounts/resourceId/balances"
        },
        "transactions": {
          "href": "/v1/berlin-group/v1/accounts/resourceId/transactions"
        }
      }
    }
  ]
}

REQUEST 6
GET https://xs2a.tech26.de/v1/berlin-group/v1/accounts/resourceId/balances
Accept: application/json
Content-Type: application/json
Authorization: Bearer atkn
Consent-Id: consentId
PSU-IP-ADDRESS: 127.0.0.1
X-Aggregator: Tink Testing

RESPONSE 6
200
Date: Sun, 10 Jan 2021 09:53:31 GMT
Date: Sun, 10 Jan 2021 09:53:31 GMT
Content-Type: application/json
Server: envoy
Vary: Accept-Encoding
x-content-type-options: nosniff
x-content-type-options: nosniff
x-content-type-options: nosniff
x-frame-options: DENY
x-frame-options: SAMEORIGIN
x-frame-options: DENY
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
x-envoy-upstream-service-time: *** MASKED ***
Transfer-Encoding: chunked

{
  "balances": [
    {
      "balanceType": "expected",
      "balanceAmount": {
        "amount": "96.51",
        "currency": "EUR"
      },
      "lastChangeDateTime": "2021-01-10T09:53:31.539Z",
      "referenceDate": "2021-01-10"
    }
  ],
  "account": {
    "iban": "IBAN"
  }
}

REQUEST 7
GET https://xs2a.tech26.de/v1/berlin-group/v1/accounts/resourceId/transactions
Accept: application/json
Content-Type: application/json
Authorization: Bearer atkn
Consent-Id: consentId
PSU-IP-ADDRESS: 127.0.0.1
X-Aggregator: Tink Testing

RESPONSE 7
200
Date: Sun, 10 Jan 2021 09:53:32 GMT
Date: Sun, 10 Jan 2021 09:53:32 GMT
Content-Type: application/json
Server: envoy
Vary: Accept-Encoding
x-content-type-options: nosniff
x-content-type-options: nosniff
x-content-type-options: nosniff
x-frame-options: DENY
x-frame-options: SAMEORIGIN
x-frame-options: DENY
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
x-xss-protection: 1; mode=block
x-envoy-upstream-service-time: *** MASKED ***
Transfer-Encoding: chunked

{
  "account": {
    "iban": "IBAN"
  },
  "transactions": {
    "pending": [],
    "booked": [
      {
        "transactionId": "1",
        "bankTransactionCode" : "transaction_code",
        "endToEndId" : "NOTPROVIDED",
        "bookingDate" : "2020-09-22",
        "valueDate" : "2020-09-22",
        "transactionAmount" : {
          "currency" : "EUR",
          "amount" : 10
        },
        "creditorAccount" : {
          "iban" : "DE9576040061036235462326"
        },
        "debtorName" : "Name Surname",
        "debtorAccount" : {
          "iban" : "DE4312030000136235462326"
        },
        "remittanceInformationUnstructured" : "asdfzxcv234"
      }
    ],
    "_links": {
      "account": {
        "href": "/v1/berlin-group/v1/accounts/138c5e46-c436-4a9b-8ac1-e9227a6754af"
      }
    }
  }
}
