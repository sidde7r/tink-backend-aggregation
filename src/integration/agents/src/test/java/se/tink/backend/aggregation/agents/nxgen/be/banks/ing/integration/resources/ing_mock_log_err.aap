REQUEST 1
GET https://mobilebanking.ing.be/api/homebank/sl-menu/items/en
X-Aggregator : Tink Testing

RESPONSE 1
302
Content-Type: application/json

<html><head>302 Moved Temporarily</head><body><a href="https://www.ing.be/sso/ssohttphandler.ashx?TAM_OP=login&ERROR_CODE=0&OLDSESSION=&URL=https%3A%2F%2Fmobilebanking.ing.be%2Fapi%2Fhomebank%2Fsl-menu%2Fitems%2Fen">Here</a></body></html>

REQUEST 2
POST https://mobilebanking.ing.be/hb_mp/eb/ebmp/MobileHello?rootRef=/eb&AppName=1&userProfile=M_NA
Content-Type : application/x-www-form-urlencoded
X-Aggregator: Tink Testing

deviceType=1&applicationIdentification=9.0&osVersion=12.4&deviceJailBroken=0&browserAppVersion=Mozilla%2F5.0+%28iPhone8%2C1%3B+U%3B+CPU+OS+10.3.1+like+Mac+OS+X%3B+en-us%29+AppleWebKit%2F531.21.10+%28KHTML%2C+like+Gecko%29+Version%2F4.0.4+Mobile%2F7B334b+Safari%2F531.21.10%3B+MyING.be%2F9.0&osType=1&ipAddress=127.0.0.1&userLanguageCode=EN&dse_type=post

RESPONSE 2
200
Content-Type: application/json

{
  "mobileResponse": {
    "returnCode": "OK",
    "header": {
      "url": "https://ebanking.ing.be/hb_eb/eb/MobileRequest",
      "version": "0.1"
    },
    "sessionData": {
      "balanceBeforeLogon": "1",
      "oldEnrollStatus": "1",
      "salt": "8075EA3769",
      "closedEnvironment": "1",
      "enableMigrationWidget": "1",
      "oldTokenLogonStatus": "1",
      "logonStatus": "1",
      "adobeTestAndTarget": "1",
      "facebookLink": "1",
      "migrationStartDate": "20150728",
      "saltValidityPeriod": "10",
      "oldLogonStatus": "1",
      "blockAllRetailUser": "0",
      "migrationStopDate": "20150819",
      "tokenLogon": "1",
      "openEnvironment": "1",
      "enrollStatus": "1",
      "blockMigratedUser": "1",
      "twitterLink": "1",
      "pbMStatus": "1"
    },
    "requests": [
      {
        "name": "enrolDevice",
        "url": "/hb_eb/eb/MobileRequest?dse_applicationId\u003d-1\u0026dse_operationName\u003dmobileStartEnrollFlow\u0026dse_pageId\u003d1\u0026dse_processorState\u003dinitial\u0026dse_nextEventName\u003dstart",
        "params": [
          {
            "name": "securityType"
          },
          {
            "name": "logonType"
          },
          {
            "name": "ingId"
          },
          {
            "name": "userLanguageCode"
          },
          {
            "name": "userLanguage"
          },
          {
            "name": "appCode"
          },
          {
            "name": "appType"
          },
          {
            "name": "logonTimeStamp"
          },
          {
            "name": "deviceId"
          }
        ]
      },
      {
        "name": "logon",
        "url": "/hb_eb/eb/MobileRequest?dse_applicationId\u003d-1\u0026dse_operationName\u003dmobileNewLogonFlow\u0026dse_pageId\u003d1\u0026dse_processorState\u003dinitial\u0026dse_nextEventName\u003dstart",
        "params": [
          {
            "name": "ingId"
          },
          {
            "name": "logonType"
          },
          {
            "name": "cardNr"
          },
          {
            "name": "deviceId"
          },
          {
            "name": "appUniqueId"
          },
          {
            "name": "pnOptin"
          },
          {
            "name": "devicePNId"
          }
        ]
      },
{
        "name": "logonWithToken",
        "url": "/hb_eb/eb/MobileRequest?dse_applicationId\u003d-1\u0026dse_operationName\u003dmobileNewLogonFlow\u0026dse_pageId\u003d1\u0026dse_processorState\u003dinitial\u0026dse_nextEventName\u003dstart",
        "params": [
          {
            "name": "ingId"
          },
          {
            "name": "logonType"
          },
          {
            "name": "deviceId"
          }
        ]
      },
      {
        "name": "retrieveBalanceBeforeLogon",
        "url": "/hb_mp/eb/ebmp/MobilePublicBalance",
        "params": [
          {
            "name": "ingId"
          },
          {
            "name": "logonType"
          },
          {
            "name": "hash"
          },
          {
            "name": "deviceId"
          }
        ]
      },
        {
        "name": "mobilePublicPreferences",
        "url": "/hb_mp/eb/ebmp/MobilePublicPreferences",
        "params": [
          {
            "name": "rootRef"
          },
          {
            "name": "userLanguageCode"
          },
          {
            "name": "applicationIdentification"
          },
          {
            "name": "tokenId"
          },
          {
            "name": "logonType"
          },
          {
            "name": "deviceType"
          },
          {
            "name": "osType"
          },
          {
            "name": "osVersion"
          },
          {
            "name": "deviceJailBroken"
          },
          {
            "name": "MOBILE_IP_ADDESS"
          },
          {
            "name": "browserAppVersion"
          },
          {
            "name": "ingId"
          }
        ]
      },
{
        "name": "authenticate",
        "url": "/tbauthn/htmlTrustBuilderRequest",
        "params": [
          {
            "name": "securityType"
          },
          {
            "name": "logonType"
          },
          {
            "name": "ingId"
          },
          {
            "name": "cardNr"
          },
          {
            "name": "psn"
          },
          {
            "name": "deviceId"
          },
          {
            "name": "otp"
          },
          {
            "name": "channelCode"
          },
          {
            "name": "appCode"
          },
          {
            "name": "appType"
          },
          {
            "name": "logonTimeStamp"
          },
          {
            "name": "RequestType"
          },
          {
            "name": "password"
          }
        ]
      },
      {
        "name": "logout",
        "url": "/hb_eb/eb/MobileRequest?dse_applicationId\u003d-1\u0026dse_operationName\u003dmobileLogout\u0026dse_pageId\u003d2"
      }]}}

REQUEST 3
POST https://mobilebanking.ing.be/tbauthn/htmlTrustBuilderRequest?AppName=1&userProfile=M_NA
Content-Type : application/x-www-form-urlencoded
X-Aggregator: Tink Testing

ingId=DUMMY_USER&cardNr=DUMMY_CARD_NUMBER&otp=DUMMY_OTP&appCode=4&dse_type=post&securityType=UCR&appType=1&lang=%2FEN%2F&logonType=01&channelCode=4&RequestType=enroll

RESPONSE 3
302

<html><head>302 Moved Temporarily</head><body><a href="https://www.ing.be/sso/ssohttphandler.ashx?TAM_OP=login_success&ERROR_CODE=953091559&OLDSESSION=&URL=https%3A%2F%2Fmobilebanking.ing.be%2Ftbauthn%2FhtmlTrustBuilderRequest%3FAppName=%3D1%26userProfile%3DM_NA">Here</a></body></html>

REQUEST 4
POST https://mobilebanking.ing.be/hb_eb/eb/MobileRequest?dse_applicationId=-1&dse_operationName=mobileStartEnrollFlow&dse_pageId=1&dse_processorState=initial&dse_nextEventName=start&AppName=1&userProfile=M_NA
Content-Type : application/x-www-form-urlencoded
X-Aggregator: Tink Testing

deviceType=1&ingId=DUMMY_USER&cardNr=DUMMY_CARD_NUMBER&langatauth=%2FEN%2F&appCode=4&deviceName=N%2FA&dse_type=post&applicationIdentification=9.0&osVersion=12.4&securityType=UCR&appType=1&osType=1&userLanguageCode=EN&logonType=01&channelCode=4

RESPONSE 4 SET STARTED_ENROLL
200
Content-Type: application/json

 {
  "mobileResponse": {
  "header": {
  "version": "0.1",
  "url": "/eb/MobileRequest"
  },
  "returnCode": "OK",
  "virtualCardNumber": "DUMMY_CARD_NUMBER:00",
  "virtualCardExpirationDate": "20230706",
  "pin": "DUMMY_PIN",
  "registrationCode": "3258488253",
  "authorisationTrustedBeneficiaries": "1",
  "authorisationTrustedBeneficiariesPlus": "1",
  "authorisationThirdPartyTransfer": "1",
  "authorisationThirdPartyTransferPlus": "0",
  "authorisationSignByTwo": "1",
  "authorisationSignByTwoPlus": "1",
  "requests": [
  {
  "name": "prepareEnroll",
  "url":  "/hb_eb/eb/MobileRequest?dse_sessionId_h=60c2533b61fb55aa8ae488f3dada2cbc4e61f179&dse_applicationId=-1&dse_operationName=mobilePrepareEnrollTrxFlow&dse_pageId=2&dse_processorState=initial&dse_nextEventName=start"
  },
 {
 "name": "getAppCredentials",
 "url":  "/hb_mp/eb/ebmp/api/provisioning/pp"
 },
 {
 "name": "confirmEnroll",
 "url": "/hb_eb/eb/MobileRequest?dse_sessionId_h=60c2533b61fb55aa8ae488f3dada2cbc4e61f179&dse_applicationId=-1&dse_operationName=mobileConfirmEnrollFlow&dse_pageId=2&dse_processorState=initial&dse_nextEventName=start&dsmOperation=execute",
 "params": [
 {
 "name": "ingId"
 },
 {
 "name": "virtualCardNumber"
 },
 {
 "name": "deviceId"
 },
 {
 "name": "signingId"
 },
 {
 "name": "otpValue"
 },
 {
 "name": "otpSystem"
 },
 {
 "name": "subscriptionFlagThirdParty"
 },
 {
 "name": "subscriptionFlagTrustedBeneficiaries"
 },
 {
 "name": "subscriptionFlagSignByTwo"
 },
 {
 "name": "profileName"
 },
 {
 "name": "deviceName"
 },
 {
 "name": "deviceType"
 },
 {
 "name": "macAddress"
 }
 ]
 }
 ]
 }
}

REQUEST 5
POST https://mobilebanking.ing.be/hb_mp/eb/ebmp/api/provisioning/pp
Content-Type : application/x-www-form-urlencoded
X-Aggregator: Tink Testing

PUBLIC_KEY_ID=eps-public-key&PROTOCOL_VERSION=3&METHOD=GETAPPLICATIONSCREDENTIALS

RESPONSE 5
200
Content-Type: application/json

{"X-ENROLMENT-PROTOCOL-VERSION":"3","X-ENROLMENT-MESSAGE":"SUCCESS","X-ENROLMENT-STATUS-CODE":"0","X-ENROLMENT-ENC-CREDENTIALS":"6vqGUmwcyJ8ljiY4cY4+oQne87S/AB9UHPTHcR5eCLkQWuPXXPIkFiSfMAhNDP2SzZBHAITSGR02thgdB7o75p/6B9S15yKlXzEtGSTu0Q0="}

REQUEST 6 MATCH STARTED_ENROLL
POST https://mobilebanking.ing.be/hb_eb/eb/MobileRequest?dse_sessionId_h=60c2533b61fb55aa8ae488f3dada2cbc4e61f179&dse_applicationId=-1&dse_operationName=mobilePrepareEnrollTrxFlow&dse_pageId=2&dse_processorState=initial&dse_nextEventName=start
Content-Type : application/x-www-form-urlencoded
X-Aggregator: Tink Testing

dse_type=post

RESPONSE 6 SET PREPARED_ENROLL
200
Content-Type: application/json

{
"mobileResponse": {"returnCode":"OK","header":{"version":"1.0","url":"/eb/MobileRequest"},"challenges":["7213457098"],"signingId":"3a9a2422-8cca-44ae-a88b-4e4d5d0c79d9"}
}

REQUEST 7 MATCH PREPARED_ENROLL
POST https://mobilebanking.ing.be/hb_eb/eb/MobileRequest?dse_sessionId_h=60c2533b61fb55aa8ae488f3dada2cbc4e61f179&dse_applicationId=-1&dse_operationName=mobileConfirmEnrollFlow&dse_pageId=2&dse_processorState=initial&dse_nextEventName=start&dsmOperation=execute&AppName=1&userProfile=M_NA
Content-Type : application/x-www-form-urlencoded
X-Aggregator: Tink Testing

profileName=Tink+Testing&deviceType=1&ingId=DUMMY_USER&subscriptionFlagThirdParty=1&signingId=3a9a2422-8cca-44ae-a88b-4e4d5d0c79d9&deviceName=N%2FA&dse_type=post&subscriptionFlagTrustedBeneficiaries=1&subscriptionFlagSignByTwo=1&otpValue=DUMMY_SIGN_CODE&profileRenewal=0

RESPONSE 7 SET CONFIRMED_ENROLL
200
Content-Type: application/json

{
"mobileResponse": {
"header": {
"version": "0.1",
"url": "/eb/MobileRequest"
},
"returnCode": "OK"
}
}

REQUEST 8 MATCH CONFIRMED_ENROLL
POST https://mobilebanking.ing.be/hb_eb/eb/MobileRequest?dse_applicationId=-1&dse_operationName=mobileLogout&dse_pageId=2&AppName=1&userProfile=M_NA
Content-Type : application/x-www-form-urlencoded
X-Aggregator: Tink Testing

dse_type=post

RESPONSE 8 SET LOGGED_OUT
200
Content-Type: text/xml; charset=UTF-8

<?xml version="1.0" encoding="UTF-8"?>
<mobileResponse>
<returnCode>OK</returnCode>
</mobileResponse>

REQUEST 9 MATCH LOGGED_OUT
POST https://mobilebanking.ing.be/tbauthn/htmlTrustBuilderRequest?AppName=1&userProfile=M_NA
Content-Type : application/x-www-form-urlencoded
X-Aggregator: Tink Testing

ingId=DUMMY_USER&cardNr=DUMMY_CARD_NUMBER&psn=00&appCode=4&dse_type=post&securityType=MOB&appType=1&appType=1&&lang=%2FEN%2F&logonType=01&channelCode=4&RequestType=login

RESPONSE 9 SET TRUST_BUILDER_LOGIN_2
302

<html><head>302 Moved Temporarily</head><body><a href="https://www.ing.be/sso/ssohttphandler.ashx?TAM_OP=login_success&ERROR_CODE=953091559&OLDSESSION=&URL=https%3A%2F%2Fmobilebanking.ing.be%2Ftbauthn%2FhtmlTrustBuilderRequest%3FAppName=%3D1%26userProfile%3DM_NA">Here</a></body></html>

REQUEST 10 MATCH TRUST_BUILDER_LOGIN_2
POST https://mobilebanking.ing.be/hb_eb/eb/MobileRequest?dse_applicationId=-1&dse_operationName=mobileNewLogonFlow&dse_pageId=1&dse_processorState=initial&dse_nextEventName=start&AppName=1&userProfile=M_NA
Content-Type : application/x-www-form-urlencoded
X-Aggregator: Tink Testing

deviceType=1&ingId=DUMMY_USER&pnOptin=0&cardNr=DUMMY_CARD_NUMBER&langatauth=%2FEN%2F&appUniqueId=be.ING.MyING2&appCode=4&dse_type=post&applicationIdentification=9.0&osVersion=12.4&deviceJailBroken=0&browserAppVersion=Mozilla%2F5.0+%28iPhone8%2C1%3B+U%3B+CPU+OS+10.3.1+like+Mac+OS+X%3B+en-us%29+AppleWebKit%2F531.21.10+%28KHTML%2C+like+Gecko%29+Version%2F4.0.4+Mobile%2F7B334b+Safari%2F531.21.10%3B+MyING.be%2F9.0&osType=1&userLanguageCode=EN&logonType=01

RESPONSE 10 SET LOGGED_IN_2
200
Content-Type: application/json

{
 "mobileResponse": {
 "header": {
 "version": "0.1",
 "url": "/eb/MobileRequest"
 },
 "returnCode": "OK",
 "sysData" : {
 "categoryCodingSchemeVersion": ""
 },
 "customer" : {
 "ingid": "DUMMY_USER",
 "title": "1",
 "firstName": "DUMMY_FIRST_NAME",
 "lastName": "DUMMY_LAST_NAME",
 "language": "EN",
 "emailAddress": "DUMMY_EMAIL",
 "bbPremiumUser": "0",
 "noOfRemainingDays": "",
 "isMigratedUser": "0",
 "address": "DUMMY_ADDRESS",
 "city": "DUMMY_CITY",
 "readOnly": "0",
 "privateBanker": "0",
 "appPbMStatus": "1",
 "bblAgreementFlag": "1",
 "CodeMktProfile": "999",
 "isOver18": "1",
 "GDPRconsent": "0",
 "PeriodicReviewOfCustomerData": "1",
 "subscriptionAvailability": "3"
 },
 "requests": [
 {
 "name": "getaccountbalanceandavailability",
 "url": "dse_sessionId_h=60c2533b61fb55aa8ae488f3dada2cbc4e61f179&dse_applicationId=-1&dse_operationName=mobileAccountBalanceAndAvailability&dse_pageId=6&AppName=1&userProfile=M_NA"
 },
 {
 "name" :"getpendingpaymentsonaccount",
 "url" : "dse_sessionId_h=60c2533b61fb55aa8ae488f3dada2cbc4e61f179&dse_applicationId=-1&dse_operationName=mobileGetPendingPaymentsOnAccountFlow&dse_pageId=2&dse_nextEventName=start&AppName=1&userProfile=M_NA",
 "params": [
 { "name" : "acc" }
 ]
 },
 {
 "name" : "gettransactions",
 "url" : "dse_sessionId_h=60c2533b61fb55aa8ae488f3dada2cbc4e61f179&dse_applicationId=-1&dse_operationName=mobileTransactionsFlow&dse_pageId=2&dse_nextEventName=start&AppName=1&userProfile=M_NA",
 "params": [
 {"name": "acc"},
 {"name": "startIndex"},
 {"name": "endIndex"}
 ]
 }
 ],
 "services": [
 ],
 "optIns" : {
 "balanceBeforeLogon": "1",
 "payByMobile": "1",
 "payconiq": "0",
 "thirdPartyTransfer": "1",
 "trustedTransfer": "1"
 }
 }
}

REQUEST 11 MATCH LOGGED_IN_2
POST https://mobilebanking.ing.be/hb_ms/eb/MobileSSORequest?dse_sessionId_h=60c2533b61fb55aa8ae488f3dada2cbc4e61f179&dse_applicationId=-1&dse_operationName=mobileAccountBalanceAndAvailability&dse_pageId=6&AppName=1&userProfile=M_NA
Content-Type : application/x-www-form-urlencoded
X-Aggregator: Tink Testing

dse_type=post

RESPONSE 11
200
Content-Type: application/json; charset=UTF-8

{
 "mobileResponse": {
 "header": {
 "version": "0.1"
 },
 "returnCode": "NOK",
 "errors": [
 {
 "code": "001",
 "text": "Out Of Session"
 }
 ]
 }
}
