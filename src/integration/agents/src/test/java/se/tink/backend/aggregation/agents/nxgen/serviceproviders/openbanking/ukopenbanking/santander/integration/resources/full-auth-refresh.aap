
REQUEST 1
GET https://openbanking.santander.co.uk/sanuk/external/open-banking/openid-connect-provider/v1/.well-known/openid-configuration
x-fapi-financial-id: 0015800000jfFGuAAM

RESPONSE 1
200
Connection: Keep-Alive
Content-Type: application/json;charset=UTF-8
x-fapi-financial-id: 0015800000jfFGuAAM

{
    "issuer": "https://openbanking-ma.santander.co.uk",
    "authorization_endpoint": "https://openbanking.santander.co.uk/sanuk/external/open-banking/openid-connect-provider/v1/oauth2/authorize",
    "token_endpoint": "https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/openid-connect-provider/v1/oauth2/token",
    "token_endpoint_auth_methods_supported": [
        "client_secret_post",
        "tls_client_auth"
    ],
    "jwks_uri": "https://keystore.openbanking.org.uk/0015800000jfFGuAAM/0015800000jfFGuAAM.jwks",
    "scopes_supported": [
        "openid",
        "accounts",
        "payments",
        "fundsconfirmations"
    ],
    "response_types_supported": [
        "code id_token"
    ],
    "response_modes_supported": [
        "fragment"
    ],
    "acr_values_supported": [
        "urn:openbanking:psd2:sca"
    ],
    "subject_types_supported": [
        "pairwise"
    ],
    "id_token_signing_alg_values_supported": [
        "PS256"
    ],
    "request_object_signing_alg_values_supported": [
        "RS256",
        "PS256"
    ],
    "display_values_supported": [
        "page"
    ],
    "claim_types_supported": [
        "normal"
    ],
    "claims_supported": [
        "jti",
        "iss",
        "sub",
        "aud",
        "exp",
        "iat",
        "at_hash",
        "openbanking_intent_id",
        "nonce",
        "disclaimer",
        "http://openbanking.org.uk/refresh_token_expires_at",
        "acr",
        "auth_time",
        "c_hash",
        "s_hash"
    ],
    "claims_parameter_supported": "true",
    "grant_types_supported": [
        "client_credentials",
        "authorization_code",
        "refresh_token"
    ],
    "request_parameter_supported": "true",
    "request_uri_parameter_supported": "false",
    "token_endpoint_auth_signing_alg_values_supported": [
        "PS256"
    ]
}

REQUEST 2
POST https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/openid-connect-provider/v1/oauth2/token
Content-Type: application/x-www-form-urlencoded
Accept: application/json
x-fapi-financial-id: 0015800000jfFGuAAM

grant_type=client_credentials
    &scope=accounts
    &redirect_uri=https%3A%2F%2Fapi.tink.se%2Fapi%2Fv1%2Fcredentials%2Fthird-party%2Fcallback
    &client_id=DUMMY_CLIENT_ID
    &client_secret=DUMMY_CLIENT_SECRET

RESPONSE 2
200
Connection: Keep-Alive
Content-Type: application/json;charset=UTF-8

{
    "token_type": "Bearer",
    "access_token": "DUMMY_AUTH_TOKEN",
    "expires_in": 600,
    "consented_on": 1605704828,
    "scope": "accounts"
}

REQUEST 3
POST https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/account-access-consents
Accept: application/json
Content-Type: application/json
x-fapi-financial-id: 0015800000jfFGuAAM
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

{
    "Data": {
        "Permissions": [
            "ReadAccountsDetail",
            "ReadTransactionsCredits",
            "ReadDirectDebits",
            "ReadTransactionsDebits",
            "ReadBeneficiariesDetail",
            "ReadPartyPSU",
            "ReadBalances",
            "ReadStandingOrdersDetail",
            "ReadTransactionsDetail"
        ]
    },
    "Risk": {}
}

RESPONSE 3
201
Connection: Keep-Alive
Content-Type: application/json;charset=UTF-8
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

{
    "Data": {
        "TransactionFromDateTime": "2018-11-18T13:07:09+00:00",
        "Status": "AwaitingAuthorisation",
        "Permissions": [
            "**HASHED2c**",
            "**HASHEDwc**",
            "**HASHEDW+**",
            "**HASHEDxz**",
            "**HASHEDOW**",
            "**HASHED51**",
            "**HASHEDvO**",
            "**HASHEDGm**",
            "**HASHEDce**"
        ],
        "CreationDateTime": "2020-11-18T13:07:09+00:00",
        "ConsentId": "85f2593e-9062-4794-bfd0-3a45c7caaa62",
        "StatusUpdateDateTime": "2020-11-18T13:07:09+00:00"
    },
    "Risk": {},
    "Meta": {},
    "Links": {
        "Self": "https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/account-access-consents"
    }
}

REQUEST 4
GET https://keystore.openbanking.org.uk/0015800000jfFGuAAM/0015800000jfFGuAAM.jwks
x-fapi-financial-id: 0015800000jfFGuAAM

RESPONSE 4
200
Content-Type: application/jwk+json
Connection: keep-alive

{"keys": []}

REQUEST 5
POST https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/openid-connect-provider/v1/oauth2/token
Content-Type: application/x-www-form-urlencoded
Accept: application/json
x-fapi-financial-id: 0015800000jfFGuAAM

grant_type=authorization_code
    &redirect_uri=https%3A%2F%2Fapi.tink.se%2Fapi%2Fv1%2Fcredentials%2Fthird-party%2Fcallback
    &client_id=DUMMY_CLIENT_ID
    &client_secret=DUMMY_CLIENT_SECRET
    &code=DUMMY_AUTH_CODE

RESPONSE 5 SET ACCOUNT1
200
Connection: Keep-Alive
Content-Type: application/json;charset=UTF-8

{
    "token_type": "Bearer",
    "access_token": "DUMMY_ACCESS_TOKEN",
    "expires_in": 600,
    "consented_on": true,
    "scope": "openid accounts",
    "refresh_token": "DUMMY_REFRESH_TOKEN",
    "refresh_token_expires_in": 99999999,
    "id_token": "DUMMY_ID_TOKEN"
}

REQUEST 6 MATCH ACCOUNT1
GET https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/accounts
X-Aggregator: Tink Testing
x-fapi-financial-id: 0015800000jfFGuAAM
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

RESPONSE 6
200
Connection: Keep-Alive
Content-Type: application/json;charset=UTF-8
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

{
    "Data": {
        "Account": [
            {
                "AccountId": "5a433d69-2ef9-4d17-9730-cd1a11f2d808",
                "Currency": "GBP",
                "AccountType": "Personal",
                "AccountSubType": "Savings",
                "Account": [
                    {
                        "SchemeName": "UK.Santander.SavingsRollNumber",
                        "Identification": "SAVINGR12345678"
                    }
                ],
                "Servicer": {
                    "SchemeName": "UK.OBIE.BICFI",
                    "Identification": "ABBYGB2LXXX"
                }
            },
            {
                "AccountId": "8c201ba9-b066-4ea1-b453-3d05b17b18a9",
                "Currency": "GBP",
                "AccountType": "Personal",
                "AccountSubType": "CurrentAccount",
                "Account": [
                    {
                        "SchemeName": "UK.OBIE.SortCodeAccountNumber",
                        "Identification": "09090912345678"
                    }
                ],
                "Servicer": {
                    "SchemeName": "UK.OBIE.BICFI",
                    "Identification": "ABBYGB2LXXX"
                }
            }
        ]
    },
    "Links": {
        "Self": "https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/accounts"
    },
    "Meta": {
        "TotalPages": 1
    }
}

REQUEST 7
GET https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/accounts/5a433d69-2ef9-4d17-9730-cd1a11f2d808/parties
Accept: application/json
Authorization: Bearer DUMMY_ACCESS_TOKEN
x-fapi-financial-id: 0015800000jfFGuAAM
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

RESPONSE 7
200
Content-Type: application/json;charset=UTF-8
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

{
    "Data": {
        "Party": [
            {
                "PartyId": "11111111111111111111",
                "FullLegalName": "MR ADAM TINK"
            },
            {
                "PartyId": "22222222222222222222",
                "FullLegalName": "MRS ANNA TINK"
            }
        ]
    },
    "Links": {
        "Self": "https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/accounts/5a433d69-2ef9-4d17-9730-cd1a11f2d808/parties"
    },
    "Meta": {}
}

REQUEST 8
GET https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/accounts/8c201ba9-b066-4ea1-b453-3d05b17b18a9/parties
Accept: application/json
Authorization: Bearer DUMMY_ACCESS_TOKEN
x-fapi-financial-id: 0015800000jfFGuAAM
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

RESPONSE 8
200
Content-Type: application/json;charset=UTF-8
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

{
    "Data": {
        "Party": [
            {
                "PartyId": "00000000000000000000",
                "FullLegalName": "MR JOHN TINK"
            }
        ]
    },
    "Links": {
        "Self": "https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/accounts/8c201ba9-b066-4ea1-b453-3d05b17b18a9/parties"
    },
    "Meta": {}
}

REQUEST 9
GET https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/accounts/5a433d69-2ef9-4d17-9730-cd1a11f2d808/balances
x-fapi-financial-id: 0015800000jfFGuAAM
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

RESPONSE 9
200
Connection: Keep-Alive
Content-Type: application/json;charset=UTF-8
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

{
    "Data": {
        "Balance": [
            {
                "AccountId": "5a433d69-2ef9-4d17-9730-cd1a11f2d808",
                "Amount": {
                    "Amount": "0.00",
                    "Currency": "GBP"
                },
                "CreditDebitIndicator": "Credit",
                "CreditLine": [
                    {
                        "Amount": {
                            "Amount": "0.00",
                            "Currency": "GBP"
                        },
                        "Included": false,
                        "Type": "Temporary"
                    },
                    {
                        "Amount": {
                            "Amount": "0.00",
                            "Currency": "GBP"
                        },
                        "Included": false,
                        "Type": "Available"
                    }
                ],
                "Type": "InterimAvailable",
                "DateTime": "2020-11-18T13:07:46.944+0000"
            },
            {
                "AccountId": "5a433d69-2ef9-4d17-9730-cd1a11f2d808",
                "Amount": {
                    "Amount": "0.00",
                    "Currency": "GBP"
                },
                "CreditDebitIndicator": "Credit",
                "Type": "InterimBooked",
                "DateTime": "2020-11-18T13:07:46.944+0000"
            }
        ]
    },
    "Links": {
        "Self": "https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/accounts/5a433d69-2ef9-4d17-9730-cd1a11f2d808/balances"
    },
    "Meta": {
        "TotalPages": 1
    }
}

REQUEST 10
GET https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/accounts/8c201ba9-b066-4ea1-b453-3d05b17b18a9/balances
x-fapi-financial-id: 0015800000jfFGuAAM
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

RESPONSE 10
200
Connection: Keep-Alive
Content-Type: application/json;charset=UTF-8
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

{
    "Data": {
        "Balance": [
            {
                "AccountId": "8c201ba9-b066-4ea1-b453-3d05b17b18a9",
                "Amount": {
                    "Amount": "1295.87",
                    "Currency": "GBP"
                },
                "CreditDebitIndicator": "Debit",
                "CreditLine": [
                    {
                        "Amount": {
                            "Amount": "1300.00",
                            "Currency": "GBP"
                        },
                        "Included": false,
                        "Type": "Pre-Agreed"
                    },
                    {
                        "Amount": {
                            "Amount": "0.00",
                            "Currency": "GBP"
                        },
                        "Included": false,
                        "Type": "Temporary"
                    },
                    {
                        "Amount": {
                            "Amount": "4.13",
                            "Currency": "GBP"
                        },
                        "Included": false,
                        "Type": "Available"
                    }
                ],
                "Type": "InterimAvailable",
                "DateTime": "2020-11-18T13:07:47.205+0000"
            },
            {
                "AccountId": "8c201ba9-b066-4ea1-b453-3d05b17b18a9",
                "Amount": {
                    "Amount": "1295.87",
                    "Currency": "GBP"
                },
                "CreditDebitIndicator": "Debit",
                "Type": "InterimBooked",
                "DateTime": "2020-11-18T13:07:47.205+0000"
            }
        ]
    },
    "Links": {
        "Self": "https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/accounts/8c201ba9-b066-4ea1-b453-3d05b17b18a9/balances"
    },
    "Meta": {
        "TotalPages": 1
    }
}

REQUEST 11
GET https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/accounts
x-fapi-financial-id: 0015800000jfFGuAAM
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

RESPONSE 11
200
Connection: Keep-Alive
Content-Type: application/json;charset=UTF-8
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

{
    "Data": {
        "Account": [
            {
                "AccountId": "5a433d69-2ef9-4d17-9730-cd1a11f2d808",
                "Currency": "GBP",
                "AccountType": "Personal",
                "AccountSubType": "Savings",
                "Account": [
                    {
                        "SchemeName": "UK.Santander.SavingsRollNumber",
                        "Identification": "SAVINGR12345678"
                    }
                ],
                "Servicer": {
                    "SchemeName": "UK.OBIE.BICFI",
                    "Identification": "ABBYGB2LXXX"
                }
            },
            {
                "AccountId": "8c201ba9-b066-4ea1-b453-3d05b17b18a9",
                "Currency": "GBP",
                "AccountType": "Personal",
                "AccountSubType": "CurrentAccount",
                "Account": [
                    {
                        "SchemeName": "UK.OBIE.SortCodeAccountNumber",
                        "Identification": "09090912345678"
                    }
                ],
                "Servicer": {
                    "SchemeName": "UK.OBIE.BICFI",
                    "Identification": "ABBYGB2LXXX"
                }
            }
        ]
    },
    "Links": {
        "Self": "https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/accounts"
    },
    "Meta": {
        "TotalPages": 1
    }
}

REQUEST 12
GET https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/party
Accept: application/json
x-fapi-financial-id: 0015800000jfFGuAAM
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

RESPONSE 12
200
Connection: Keep-Alive
Content-Type: application/json;charset=UTF-8
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

{
    "Meta": {
        "TotalPages": 1
    },
    "Links": {
        "Self": "https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/aisp/party"
    },
    "Data": {
        "Party": {
            "PartyId": "00000000000000000000",
            "Name": "MR JOHN TINK"
        }
    }
}
