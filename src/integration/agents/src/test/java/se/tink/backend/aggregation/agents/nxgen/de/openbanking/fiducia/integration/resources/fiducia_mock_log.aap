
REQUEST 1
POST https://www.raiba-muc-sued.de/services_xs2a/v1/consents
accept: application/json
Content-Type: application/json
psu-id: dummy_psu_id

{"access":{"allPsd2":"allAccounts"},"frequencyPerDay":"4","recurringIndicator":"true","validUntil":"9999-12-31","combinedServiceIndicator":"false"}

RESPONSE 1
201
ASPSP-SCA-Approach: EMBEDDED
Location: /v1/consents/dummy_consent_id
Content-Type: application/json;charset=utf-8

{"consentStatus":"received","consentId":"dummy_consent_id","_links":{"startAuthorisationWithPsuAuthentication":{"href":"/v1/consents/dummy_consent_id/authorisations"}}}

REQUEST 2
POST https://www.raiba-muc-sued.de/services_xs2a/v1/consents/dummy_consent_id/authorisations
accept: application/json
Content-Type: application/json
psu-id: dummy_psu_id

{"psuData":{"password":"dummy_password"}}

RESPONSE 2
200
ASPSP-SCA-Approach: EMBEDDED
Content-Type: application/json;charset=utf-8

{"chosenScaMethod":{"authenticationType":"PUSH_OTP","authenticationMethodId":"944","name":"SecureGo"},"challengeData":{"additionalInformation":"Ihre TAN wurde an Ihre App 'Google Pixel 2' gesendet."},"_links":{"authoriseTransaction":{"href":"/v1/consents/dummy_consent_id/authorisations/9827525510140020281PSDSE-FINA-44059AU3171ID"}},"scaStatus":"started"}

REQUEST 3
GET https://www.raiba-muc-sued.de/services_xs2a/v1/consents/dummy_consent_id/authorisations
accept: application/json
psu-id: dummy_psu_id

RESPONSE 3
200
Content-Type: application/json;charset=utf-8

{"authorisationIds":["dummy_authorization_id"]}

REQUEST 4
PUT https://www.raiba-muc-sued.de/services_xs2a/v1/consents/dummy_consent_id/authorisations/dummy_authorization_id
accept: application/json
psu-id: dummy_psu_id
Content-Type: application/json

{"scaAuthenticationData":"dummy_otp_code"}

RESPONSE 4
200
Content-Type: application/json;charset=utf-8

{}

REQUEST 5
GET https://www.raiba-muc-sued.de/services_xs2a/v1/accounts
accept: application/json
psu-id: dummy_psu_id
consent-id: dummy_consent_id

RESPONSE 5
200
Content-Type: application/json;charset=utf-8

{"accounts":[{"resourceId":"dummy_resource_id","iban":"some_iban","currency":"EUR","ownerName":"Jan Unknown","name":"Kontokorrent","bic":"GENODEF1M03"}]}

REQUEST 6
GET https://www.raiba-muc-sued.de/services_xs2a/v1/accounts/dummy_resource_id/balances
accept: application/json
psu-id: dummy_psu_id
consent-id: dummy_consent_id

RESPONSE 6
200
Content-Type: application/json;charset=utf-8

{"balances":[{"balanceAmount":{"currency":"EUR","amount":"274.56"},"balanceType":"closingBooked"}]}

REQUEST 7
GET https://www.raiba-muc-sued.de/services_xs2a/v1/accounts/dummy_resource_id/transactions?bookingStatus=booked&dateFrom=2015-01-01
accept: application/json
psu-id: dummy_psu_id
consent-id: dummy_consent_id

RESPONSE 7
200
Content-Type: application/json;charset=utf-8

{"account":{"iban":"some_iban","currency":"EUR"},"transactions":{"booked":[{"endToEndId":"NOTPROVIDED","bookingDate":"2020-01-30","valueDate":"2020-01-30","transactionAmount":{"currency":"EUR","amount":"-10.00"},"creditorName":"Jan Unknown","creditorAccount":{"iban":"another_iban"},"debtorName":"Jan Unknown","debtorAccount":{"iban":"some_iban"},"remittanceInformationUnstructured":"To own account IBAN: another_iban BIC: PBNKDEFFXXX","purposeCode":"RINP","proprietaryBankTransactionCode":"NTRF+117+00900"},{"endToEndId":"NOTPROVIDED","bookingDate":"2020-03-02","valueDate":"2020-03-02","transactionAmount":{"currency":"EUR","amount":"30.00"},"creditorName":"Jan Unknown","creditorAccount":{"iban":"another_iban"},"debtorName":"Jan Unknown","debtorAccount":{"iban":"some_iban"},"remittanceInformationUnstructured":"To own account IBAN: another_iban BIC: PBNKDEFFXXX","purposeCode":"RINP","proprietaryBankTransactionCode":"NTRF+117+00900"},{"endToEndId":"NOTPROVIDED","bookingDate":"2020-03-30","valueDate":"2020-03-30","transactionAmount":{"currency":"EUR","amount":"-1.00"},"creditorName":"Jan Unknown","creditorAccount":{"iban":"another_iban"},"debtorName":"Jan Unknown","debtorAccount":{"iban":"some_iban"},"remittanceInformationUnstructured":"To own account IBAN: another_iban BIC: PBNKDEFFXXX","purposeCode":"RINP","proprietaryBankTransactionCode":"NTRF+117+00900"}],"_links":{"account":{"href":"/v1/accounts/imwKB0wEMu60UQVZOPCJA3"}}},"balances":[{"balanceAmount":{"currency":"EUR","amount":"277.56"},"balanceType":"openingBooked","referenceDate":"2020-01-30"},{"balanceAmount":{"currency":"EUR","amount":"274.56"},"balanceType":"closingBooked","referenceDate":"2020-03-30"}]}