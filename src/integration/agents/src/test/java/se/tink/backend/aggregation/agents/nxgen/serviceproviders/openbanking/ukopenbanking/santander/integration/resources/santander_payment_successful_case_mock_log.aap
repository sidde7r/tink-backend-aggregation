REQUEST 1
GET https://openbanking.santander.co.uk/sanuk/external/open-banking/openid-connect-provider/v1/.well-known/openid-configuration
x-fapi-financial-id: 0015800000jfFGuAAM
X-Aggregator: Tink Testing

RESPONSE 1
200
Connection: Keep-Alive
Content-Type: application/json;charset=UTF-8
x-fapi-financial-id: 0015800000jfFGuAAM
X-Aggregator: Tink Testing
Content-Length: 1302
Connection: keep-alive
Server: Apache
Last-Modified: Tue, 21 May 2019 20:57:42 GMT
Accept-Ranges: bytes
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff

{"issuer":"https://openbanking-ma.santander.co.uk","authorization_endpoint":"https://openbanking.santander.co.uk/sanuk/external/open-banking/openid-connect-provider/v1/oauth2/authorize","token_endpoint":"https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/openid-connect-provider/v1/oauth2/token","token_endpoint_auth_methods_supported":["client_secret_post","tls_client_auth"],"jwks_uri":"https://keystore.openbanking.org.uk/0015800000jfFGuAAM/0015800000jfFGuAAM.jwks","scopes_supported":["openid","accounts","payments","fundsconfirmations"],"response_types_supported":["code id_token"],"response_modes_supported":["fragment"],"acr_values_supported":["urn:openbanking:psd2:sca"],"subject_types_supported":["pairwise"],"id_token_signing_alg_values_supported":["PS256"],"request_object_signing_alg_values_supported":["RS256","PS256"],"display_values_supported":["page"],"claim_types_supported":["normal"],"claims_supported":["jti","iss","sub","aud","exp","iat","at_hash","openbanking_intent_id","nonce","disclaimer","http://openbanking.org.uk/refresh_token_expires_at","acr","auth_time","c_hash","s_hash"],"claims_parameter_supported":"true","grant_types_supported":["client_credentials","authorization_code","refresh_token"],"request_parameter_supported":"true","request_uri_parameter_supported":"false","token_endpoint_auth_signing_alg_values_supported":["PS256"]}

REQUEST 2
POST https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/openid-connect-provider/v1/oauth2/token
Content-Type: application/x-www-form-urlencoded
Accept: application/json
X-Aggregator: Tink Testing
x-fapi-financial-id: 0015800000jfFGuAAM

grant_type=client_credentials&scope=payments&redirect_uri=https%3A%2F%2Fapi.tink.se%2Fapi%2Fv1%2Fcredentials%2Fthird-party%2Fcallback&client_id=DUMMY_CLIENT_ID&client_secret=DUMMY_CLIENT_SECRET

RESPONSE 2 SET STATE_PAYMENT
200
Content-Type: application/json;charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Referrer-Policy: origin
Cache-Control: no-cache, no-store
Pragma: no-cache
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Aggregator: Tink Testing
x-fapi-financial-id: 0015800000jfFGuAAM

{"token_type":"Bearer","access_token":"DUMMY_TPP_ACCESS_TOKEN","expires_in":600,"consented_on":1604330635,"scope":"payments"}

REQUEST 3
POST https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/pisp/domestic-payment-consents
Accept: application/json
Content-Type: application/json
X-Aggregator: Tink Testing
x-idempotency-key: 0000000000000000
Authorization: Bearer DUMMY_TPP_ACCESS_TOKEN
x-fapi-financial-id: 0015800000jfAW1AAM
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000
x-jws-signature: RkFLRV9TSUdOQVRVUkUK
x-fapi-financial-id: 0015800000jfFGuAAM

{"Risk":{"PaymentContextCode":"Other"},"Data":{"Initiation":{"InstructionIdentification":"b900555d03124056b54930e1c53c9cac","EndToEndIdentification":"b900555d03124056b54930e1c53c9ca","InstructedAmount":{"Amount":"1.00","Currency":"GBP"},"CreditorAccount":{"SchemeName":"UK.OBIE.SortCodeAccountNumber","Identification":"77788812345678","Name":"Dummy creditor name"},"RemittanceInformation":{"Reference":"UK Demo"}}}}

RESPONSE 3
201
Content-Type: application/json
Transfer-Encoding: chunked
Connection: keep-alive
Server: Apache
X-Content-Type-Options: nosniff
X-Download-Options: noopen,noopen
Referrer-Header: no-referrer,no-referrer
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, must-revalidate,no-cache;no-store
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000
x-fapi-financial-id: 0015800000jfFGuAAM
X-Aggregator: Tink Testing

{"Data":{"ConsentId":"ca638bcb-bb90-48d9-a9a8-0b4403c18647","CreationDateTime":"2020-11-02T15:23:56Z","Status":"AwaitingAuthorisation","StatusUpdateDateTime":"2020-11-02T15:23:56Z","Initiation":{"InstructionIdentification":"b900555d03124056b54930e1c53c9cac","EndToEndIdentification":"b900555d03124056b54930e1c53c9cac","InstructedAmount":{"Amount":"1.00","Currency":"GBP"},"CreditorAccount":{"SchemeName":"UK.OBIE.SortCodeAccountNumber","Identification":"77788812345678","Name":"Dummy creditor name"},"RemittanceInformation":{"Reference":"UK Demo"}}},"Risk":{"PaymentContextCode":"Other"},"Links":{"Self":"https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/pisp/domestic-payment-consents/ca638bcb-bb90-48d9-a9a8-0b4403c18647"},"Meta":{}}

REQUEST 4
GET https://keystore.openbanking.org.uk/0015800000jfFGuAAM/0015800000jfFGuAAM.jwks
Connection: keep-alive
X-Aggregator: Tink
x-fapi-financial-id: 0015800000jfFGuAAM

RESPONSE 4
200
Content-Type: application/json;charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Date: Thu, 30 Jan 2020 12:43:59 GMT
Cache-Control: no-cache, no-store
Pragma: no-cache
Expires: Thu, 01 Jan 1970 00:00:00 GMT

{"keys": []}

REQUEST 5 MATCH STATE_PAYMENT
POST https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/openid-connect-provider/v1/oauth2/token
Content-Type: application/x-www-form-urlencoded
Accept: application/json
X-Aggregator: Tink Testing
x-fapi-financial-id: 0015800000jfFGuAAM

grant_type=authorization_code&redirect_uri=https%3A%2F%2Fapi.tink.se%2Fapi%2Fv1%2Fcredentials%2Fthird-party%2Fcallback&client_id=DUMMY_CLIENT_ID&client_secret=DUMMY_CLIENT_SECRET&code=DUMMY_AUTH_CODE

RESPONSE 5
200
Content-Type: application/json;charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Referrer-Policy: origin
Cache-Control: no-cache, no-store
Pragma: no-cache
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff

{"token_type":"Bearer","access_token":"DUMMY_ACCESS_TOKEN","expires_in":600,"consented_on":1604330684,"scope":"openid payments","refresh_token":"DUMMY_REFRESH_TOKEN"}

REQUEST 6
POST https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/pisp/domestic-payments
Accept: application/json
Content-Type: application/json
X-Aggregator: Tink Testing
x-idempotency-key: 0000000000000000
Authorization: Bearer DUMMY_ACCESS_TOKEN
x-fapi-financial-id: 0015800000jfAW1AAM
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000
x-jws-signature: RkFLRV9TSUdOQVRVUkUK
x-fapi-financial-id: 0015800000jfFGuAAM

{"Risk":{"PaymentContextCode":"Other"},"Data":{"ConsentId":"ca638bcb-bb90-48d9-a9a8-0b4403c18647","Initiation":{"RemittanceInformation":{"Reference":"UK Demo"},"EndToEndIdentification":"b900555d03124056b54930e1c53c9ca","InstructionIdentification":"b900555d03124056b54930e1c53c9cac","CreditorAccount":{"SchemeName":"UK.OBIE.SortCodeAccountNumber","Identification":"77788812345678","Name":"Dummy creditor name"},"InstructedAmount":{"Amount":"1.00","Currency":"GBP"}}}}

RESPONSE 6
201
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Connection: keep-alive
Server: Apache
X-Content-Type-Options: nosniff
X-Download-Options: noopen,noopen
Referrer-Header: no-referrer,no-referrer
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, must-revalidate,no-cache;no-store
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

{"Data":{"DomesticPaymentId":"8a2cc798-ec7f-48c4-aae6-d1d1c2941f72","ConsentId":"ca638bcb-bb90-48d9-a9a8-0b4403c18647","CreationDateTime":"2020-11-02T15:24:45Z","Status":"Pending","StatusUpdateDateTime":"2020-11-02T15:24:45Z","Initiation":{"InstructionIdentification":"b900555d03124056b54930e1c53c9cac","EndToEndIdentification":"b900555d03124056b54930e1c53c9cac","InstructedAmount":{"Amount":"1.00","Currency":"GBP"},"CreditorAccount":{"SchemeName":"UK.OBIE.SortCodeAccountNumber","Identification":"77788812345678","Name":"Dummy creditor name"},"RemittanceInformation":{"Reference":"UK Demo"}}},"Links":{"Self":"https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/pisp/domestic-payments/8a2cc798-ec7f-48c4-aae6-d1d1c2941f72"},"Meta":{}}

REQUEST 7
GET https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/pisp/domestic-payments/8a2cc798-ec7f-48c4-aae6-d1d1c2941f72
Authorization: Bearer DUMMY_TPP_ACCESS_TOKEN
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000
Accept: application/json
x-fapi-financial-id: 0015800000jfFGuAAM
x-idempotency-key : 0000000000000000
X-Aggregator: Tink Testing

RESPONSE 7
200
Content-Type: application/json;charset=UTF-8
x-fapi-interaction-id: 00000000-0000-4000-0000-000000000000

{"Data":{"DomesticPaymentId":"8a2cc798-ec7f-48c4-aae6-d1d1c2941f72","ConsentId":"ca638bcb-bb90-48d9-a9a8-0b4403c18647","CreationDateTime":"2020-11-02T15:24:45Z","Status":"AcceptedSettlementCompleted","StatusUpdateDateTime":"2020-11-02T15:24:45Z","Initiation":{"InstructionIdentification":"b900555d03124056b54930e1c53c9cac","EndToEndIdentification":"b900555d03124056b54930e1c53c9cac","InstructedAmount":{"Amount":"1.00","Currency":"GBP"},"CreditorAccount":{"SchemeName":"UK.OBIE.SortCodeAccountNumber","Identification":"77788812345678","Name":"Dummy creditor name"},"RemittanceInformation":{"Reference":"UK Demo"}}},"Links":{"Self":"https://openbanking-ma.santander.co.uk/sanuk/external/open-banking/v3.1/pisp/domestic-payments/8a2cc798-ec7f-48c4-aae6-d1d1c2941f72"},"Meta":{}}
