<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .hidden {
            visibility: hidden;
        }
    </style>
    <script>
        const shadowDomStyle = `
            .hidden {
                visibility: hidden;
            }
        `;

        function createShadowHost1() {
            const shadowHost = document.getElementById("PARENT_SHADOW_HOST_1");
            const shadowRoot = shadowHost.attachShadow({mode: 'open'});

            const style = document.createElement("style");
            style.textContent = shadowDomStyle;

            const div = document.createElement("div");
            div.id = "PARENT_SHADOW_HOST_1_ROOT";
            div.innerHTML = `
                <div class="mainElementSelector" id="PARENT_SHADOW_HOST_1_MAIN_ELEMENT_VISIBLE">main element visible</div>
                <div class="mainElementSelector hidden" id="PARENT_SHADOW_HOST_1_MAIN_ELEMENT_HIDDEN">main element hidden</div>
                <div class="otherElementSelector" id="PARENT_SHADOW_HOST_1_OTHER_ELEMENT">other element</div>
            `;

            shadowRoot.appendChild(style);
            shadowRoot.appendChild(div);
        }

        function createShadowHost2() {
            const shadowHost = document.getElementById("PARENT_SHADOW_HOST_2");
            const shadowRoot = shadowHost.attachShadow({mode: 'open'});

            const style = document.createElement("style");
            style.textContent = shadowDomStyle;

            const div = document.createElement("div");
            div.id = "PARENT_SHADOW_HOST_2_ROOT";
            div.innerHTML = `
                <div class="mainElementSelector" id="PARENT_SHADOW_HOST_2_MAIN_ELEMENT_VISIBLE">main element visible</div>
                <div class="mainElementSelector hidden" id="PARENT_SHADOW_HOST_2_MAIN_ELEMENT_HIDDEN">main element hidden</div>
                <div class="otherElementSelector" id="PARENT_SHADOW_HOST_2_OTHER_ELEMENT">other element</div>
            `;

            shadowRoot.appendChild(style);
            shadowRoot.appendChild(div);
        }

        window.addEventListener("load", function () {
            createShadowHost1();
            createShadowHost2();
        });
    </script>
</head>

<body>

<div class="mainElementSelector" id="PARENT_MAIN_ELEMENT_VISIBLE">main element visible</div>
<div class="mainElementSelector hidden" id="PARENT_MAIN_ELEMENT_HIDDEN">main element hidden</div>
<div class="otherElementSelector" id="PARENT_OTHER_ELEMENT">other element</div>


<div class="shadowHost1" id="PARENT_SHADOW_HOST_1"></div>
<!--
Second (empty) host element with the same css class as the one above.
When we're looking for elements in shadow DOM host and there is more than 1 element matching host selector
(like in this case) the search should continue simply in the first element found - here, it's the first one.
-->
<div class="shadowHost1"></div>

<div class="shadowHost2" id="PARENT_SHADOW_HOST_2"></div>
<div class="shadowHost2"></div>

<!--
This host is empty - no shadow root attribute
-->
<div class="shadowHostWithoutRoot"></div>


<iframe class="iframe" src="example_iframe.html" id="IFRAME"></iframe>
<!--
Similarly to shadow DOM hosts - when there is more than 1 iframe element matching selector, we continue searching
elements in the first one.
-->
<iframe class="iframe"></iframe>

</body>
</html>


