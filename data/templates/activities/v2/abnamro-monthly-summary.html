@// declare the arguments used in this template
@args se.tink.backend.core.Activity activity, String title, String subtitle, se.tink.backend.abnamro.workers.activity.renderers.models.TransactionSummaryData incomeData, se.tink.backend.abnamro.workers.activity.renderers.models.TransactionSummaryData expenseData, se.tink.backend.abnamro.workers.activity.renderers.models.TransactionSummaryData leftToSpendData, String leftToSpendChart, se.tink.backend.common.workers.activity.renderers.models.HtmlSvgSection budgetSummary

<div class="timeline"></div>
<div class="activity-frame clear period-summary @activity.getFeedActivityIdentifier() v2" id="@activity.getId()">
  <div class="abnamro-monthly-summary-activity">

    <div class="centered-activity-title">
      @title
    </div>
    @if(subtitle != null && !subtitle.isEmpty())
    {
      <div class="centered-activity-title small">
        @subtitle
      </div>
    }

    <div class="divider-wrapper"><div class="divider"></div></div>

    <div class="period-summary-part" onclick="onclick@incomeData.getDeeplinkMethodName() ()">
      <div class="group">
        <div class="icon-circle-wrapper">
          <div class="icon-circle @incomeData.getIcon().getColorType()">
            &#@incomeData.getIcon().getHtmlChar()
          </div>
        </div> 
        <div class="content">
          <div class="text">
            <div class="title">@incomeData.getTitle()</div>
            <div class="amount">@incomeData.getAmount()</div>
            <div class="description">@incomeData.getDescription()</div>
          </div>
        </div>
        <div style="clear: both;"></div>
      </div>
    </div>

    <div class="divider-wrapper"><div class="divider"></div></div>

    <div class="period-summary-part" onclick="onclick@expenseData.getDeeplinkMethodName() ()">
      <div class="group">
        <div class="icon-circle-wrapper">
          <div class="icon-circle @expenseData.getIcon().getColorType()">
            &#@expenseData.getIcon().getHtmlChar()
          </div>
        </div> 
        <div class="content">
          <div class="text">
            <div class="title">@expenseData.getTitle()</div>
            <div class="amount">@expenseData.getAmount()</div>
            <div class="description">@expenseData.getDescription()</div>
          </div>
        </div>
        <div style="clear: both;"></div>
      </div>
    </div>

    <div class="divider-wrapper"><div class="divider"></div></div>

    <div class="period-summary-part left-to-spend" onclick="onclick@leftToSpendData.getDeeplinkMethodName() ()">
      <div class="group">
        <div class="icon-circle-wrapper">
          <div class="icon-circle @leftToSpendData.getIcon().getColorType()">
            &#@leftToSpendData.getIcon().getHtmlChar()
          </div>
        </div> 
        <div class="content">
          <div class="text">
            <div class="title">@leftToSpendData.getTitle()</div>
            <div class="amount">@leftToSpendData.getAmount()</div>
            <div class="description">@leftToSpendData.getDescription()</div>
          </div>
        </div>
        <div style="clear: both;"></div>
      </div>
      @if(leftToSpendChart != null && !leftToSpendChart.isEmpty())
      {
        <div class="chart">
          @escape("RAW") {@leftToSpendChart}
        </div>
      }
    </div>

    @if(budgetSummary != null)
    {
      @if (budgetSummary.getDeeplink() != null) {
        <div class="period-summary-part" onclick="onclick@budgetSummary.getDeeplinkMethodName() ()">
          @escape("RAW") {@budgetSummary.getSvg()}
        </div>

        <script>
          function onclick@budgetSummary.getDeeplinkMethodName() () {
            @if(budgetSummary.getDeeplink() != null)
            {
              window.location.href = "@budgetSummary.getDeeplink()";
            }
          }
        </script>
      } else {
        <div class="period-summary-part-no-deeplink">
          @escape("RAW") {@budgetSummary.getSvg()}
        </div>
      }
    }
  </div>
</div>
<script>
  function onclick@incomeData.getDeeplinkMethodName() () {
    @if(incomeData.getDeeplink() != null)
    {
      window.location.href = "@incomeData.getDeeplink()";
    }
  }

  function onclick@expenseData.getDeeplinkMethodName() () {
    @if(expenseData.getDeeplink() != null)
    {
      window.location.href = "@expenseData.getDeeplink()";
    }
  }

  function onclick@leftToSpendData.getDeeplinkMethodName() () {
    @if(leftToSpendData.getDeeplink() != null)
    {
      window.location.href = "@leftToSpendData.getDeeplink()";
    }
  }
</script>
