@// declare the arguments used in this template
@args se.tink.backend.core.Activity activity, se.tink.backend.common.workers.activity.renderers.models.ActivityHeader headerData, String innerTemplate, String svgIcon

<div class="timeline"></div>
<div class="activity-frame clear transaction-plural @activity.getFeedActivityIdentifier() v2" id="@activity.getId()" >
	<div class="transaction-plural-header-only" onclick="onclick@activity.getId() ()">
		<div class="icon-circle-wrapper">
			<div class="icon-circle @headerData.getIcon().getColorType()">
			&#@headerData.getIcon().getHtmlChar()</div>
		</div> 
		<div class="left-header-group">
			<div class="left-header-margin"></div>
			<div class="header">@headerData.getLeftHeader()</div>
			<div class="subtext">@headerData.getLeftSubtext()</div>
		</div>
		<div class="right-header-group">
			<div class="header">@headerData.getRightHeader()</div>
			<div class="subtext">@headerData.getRightSubtext()</div>
		</div>
		<div style="clear: both;"></div>
	</div>
	@invoke("transaction-plural")
</div>

<script>
	function onclick@activity.getId() () {
		var currentMaxHeight = $("#@activity.getId() .expanded-group").height();
		if(currentMaxHeight > 0)
		{
			$("#@activity.getId() .expanded-group").animate({ "max-height": 0 + "px" }, 200, "swing");
			$("#@activity.getId()").removeClass("expanded");
		}
		else
		{
			var expandedTransactions = $("#@activity.getId() .expanded-transaction"); 
			var first = expandedTransactions.first();
			var expandedTransactionsHeight = expandedTransactions.length * first.outerHeight(true) + 8;
			$("#@activity.getId() .expanded-group").animate({ "max-height": expandedTransactionsHeight + "px" }, 200, "swing");
				$("#@activity.getId()").addClass("expanded");
		}
	}
</script>
