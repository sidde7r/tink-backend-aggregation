@// declare the arguments used in this template
@args se.tink.backend.core.Activity activity, se.tink.backend.common.workers.activity.renderers.models.ActivityHeader headerData, List<se.tink.backend.common.workers.activity.renderers.models.ActivityHeader> loanEvents, String svgIcon, String deeplink, boolean showSwitchMortgageButton, String buttonLabel

<div class="loan-events-plural-container">
<div class="timeline"></div>

<div class="activity-frame clear loan-event-plural @activity.getFeedActivityIdentifier()" id="@activity.getId()">
    <div class="loan-event-plural-header-only" onclick="onclick@activity.getId() ()">
        <div class="icon-circle-wrapper">
            <div class="icon-circle @headerData.getIcon().getColorType()">
                &#@headerData.getIcon().getHtmlChar()
            </div>
        </div>

        <div class="left-header-group">
            <div class="left-header-margin"></div>
            <div class="header">@headerData.getLeftHeader()</div>
            <div class="subtext category">@headerData.getLeftSubtext()</div>
        </div>

        <div class="right-header-group">
            <div class="header">@headerData.getRightHeader()</div>
            <div class="subtext">@headerData.getRightSubtext()</div>
        </div>

        <div style="clear: both;"></div>

        @invoke("loan-event-expanded")

    </div>

</div>
</div>

<script>
    function onclick@activity.getId() ()
    {
        var currentMaxHeight = $("#@activity.getId() .expanded-group").height();

        if(currentMaxHeight > 0)
        {
            $("#@activity.getId() .expanded-group").animate({ "max-height": 0 + "px" }, 200, "swing");
            $("#@activity.getId()").removeClass("expanded");
        }
        else
        {
            var expandedLoanEvent = $("#@activity.getId() .expanded-loan-event");
            var first = expandedLoanEvent.first();
            var expandedLoanEventsHeight = expandedLoanEvent.length * first.outerHeight(true);
            @if (buttonLabel != "")
            {
                var expandedButton = $("#@activity.getId() .expanded-button");
                expandedLoanEventsHeight += expandedButton.first().outerHeight(true);
            }
            $("#@activity.getId() .expanded-group").animate({ "max-height": expandedLoanEventsHeight + "px" }, 200, "swing");
            $("#@activity.getId()").addClass("expanded");
        }
    }
</script>