
REQUEST 1
POST https://tpp-auth.seb.se/auth/bid/v2/authentications
Accept: application/json

RESPONSE 1 SET A0
201
Date: Tue, 02 Mar 2021 10:07:41 GMT
Date: Tue, 02 Mar 2021 10:07:41 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "auto_start_token": "a7b3a1cc-e673-4184-b34d-11aa9c0c5276"
}

REQUEST 2 MATCH A0
GET https://tpp-auth.seb.se/auth/bid/v2/authentications
Accept: application/json

RESPONSE 2 SET A1
200
Date: Tue, 02 Mar 2021 10:07:41 GMT
Date: Tue, 02 Mar 2021 10:07:41 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "hint_code": "OUTSTANDING_TRANSACTION", 
    "status": "PENDING"
}

REQUEST 3 MATCH A1
GET https://tpp-auth.seb.se/auth/bid/v2/authentications
Accept: application/json
x-seb-csrf: CSRF_TOKEN

RESPONSE 3 SET STATE5
200
Date: Tue, 02 Mar 2021 10:07:46 GMT
Date: Tue, 02 Mar 2021 10:07:46 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "hint_code": "OUTSTANDING_TRANSACTION", 
    "status": "PENDING"
}

REQUEST 4 MATCH STATE5
GET https://tpp-auth.seb.se/auth/bid/v2/authentications
Accept: application/json

RESPONSE 4 SET STATE7
200
Date: Tue, 02 Mar 2021 10:07:51 GMT
Date: Tue, 02 Mar 2021 10:07:51 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "hint_code": "USER_SIGN", 
    "status": "PENDING"
}

REQUEST 5 MATCH STATE7
GET https://tpp-auth.seb.se/auth/bid/v2/authentications
Accept: application/json

RESPONSE 5 SET STATE8
200
Date: Tue, 02 Mar 2021 10:08:00 GMT
Date: Tue, 02 Mar 2021 10:08:00 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "status": "COMPLETE"
}

REQUEST 6 MATCH STATE8
GET https://tpp-auth.seb.se/mga/sps/oauth/oauth20/dpsd2/authorize?client_id=dummyId&response_type=code&scope=psd2_accounts+psd2_payments&redirect_uri=https://127.0.0.1:7357/api/v1/thirdparty/callback
Accept: application/json

RESPONSE 6 SET STATE12
200
Date: Tue, 02 Mar 2021 10:08:01 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "CONSENT_FORM_VERIFIER": "I1H596ojtYZQA8NcbSA4"
}

REQUEST 7 MATCH STATE12
POST https://tpp-auth.seb.se/mga/sps/oauth/oauth20/dpsd2/authorize
Accept: application/json
Content-Type: application/x-www-form-urlencoded

scope=psd2_accounts+psd2_payments&trust_level=permit&consent_form_verifier=I1H596ojtYZQA8NcbSA4

RESPONSE 7 SET STATE13
200
Date: Tue, 02 Mar 2021 10:08:01 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "code": "eHk31TFKeCI9uc0SOw5ihUAb3Wxav6", 
    "state": "null"
}

REQUEST 8 MATCH STATE13
POST https://tpp-api.sebgroup.com/mga/sps/oauth/oauth20/dpsd2/token
Accept: application/json
Content-Type: application/x-www-form-urlencoded

client_id=dummyId&client_secret=dummySecret&redirect_uri=https%3A%2F%2F127.0.0.1%3A7357%2Fapi%2Fv1%2Fthirdparty%2Fcallback&grant_type=authorization_code&code=eHk31TFKeCI9uc0SOw5ihUAb3Wxav6&scope=psd2_accounts+psd2_payments

RESPONSE 8 SET STATE14
200
Date: Tue, 02 Mar 2021 10:08:01 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "access_token": "**MASKEDEh**", 
    "expires_in": 599, 
    "refresh_token": "**MASKEDtN**", 
    "scope": "psd2_accounts psd2_payments", 
    "token_type": "**MASKEDJF**"
}

REQUEST 14 MATCH STATE14
POST https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers
Accept: application/json
Content-Type: application/json

{
    "creditorAccount": {
        "bban": "56242222222"
    }, 
    "creditorAccountMessage": null, 
    "creditorName": "Joe Doe",
    "debtorAccount": {
        "iban": "SE4550000000058398257466"
    }, 
    "debtorAccountMessage": null, 
    "instructedAmount": {
        "amount": "1000.0", 
        "currency": "SEK"
    }, 
    "remittanceInformationStructured": null, 
    "remittanceInformationUnstructured": "SBAB-BANK", 
    "requestedExecutionDate": "2021-03-02", 
    "templateId": "swedish-domestic-private-credit-transfers"
}

RESPONSE 14 SET S1
201
Date: Tue, 02 Mar 2021 10:08:12 GMT
Date: Tue, 02 Mar 2021 10:08:13 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "creditorAccount": {
        "bban": "56242222222"
    }, 
    "debtorAccount": {
        "iban": "SE4550000000058398257466"
    }, 
    "instructedAmount": {
        "amount": "1000.0", 
        "currency": "SEK"
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "requestedExecutionDate": "2021-03-02", 
    "templateId": "swedish-domestic-private-credit-transfers"
}

REQUEST 15 MATCH S1
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 15 SET S2
200
Date: Tue, 02 Mar 2021 10:08:13 GMT
Date: Tue, 02 Mar 2021 10:08:13 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "transactionStatus": "RCVD"
}

REQUEST 16 MATCH S2
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 16 SET STATE20
200
Date: Tue, 02 Mar 2021 10:08:13 GMT
Date: Tue, 02 Mar 2021 10:08:14 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "startAuthorisationWithAuthenticationMethodSelection": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/authorisations"
        }, 
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "scaMethods": [
        {
            "authenticationMethodId": "mobiltbankid", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using decoupled approach", 
            "name": "Mobilt BankID"
        }, 
        {
            "authenticationMethodId": "digipass", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using Redirect to SEB pages", 
            "name": "Digipass"
        }, 
        {
            "authenticationMethodId": "bankIdOnCardDecoupled", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using BankId on card, a domestic Swedish authentication method. Decoupled approach", 
            "name": "BankID p\u00e5 kort"
        }
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 17 MATCH STATE20
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 17 SET STATE21
200
Date: Tue, 02 Mar 2021 10:08:14 GMT
Date: Tue, 02 Mar 2021 10:08:15 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "startAuthorisationWithAuthenticationMethodSelection": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/authorisations"
        }, 
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "scaMethods": [
        {
            "authenticationMethodId": "mobiltbankid", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using decoupled approach", 
            "name": "Mobilt BankID"
        }, 
        {
            "authenticationMethodId": "digipass", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using Redirect to SEB pages", 
            "name": "Digipass"
        }, 
        {
            "authenticationMethodId": "bankIdOnCardDecoupled", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using BankId on card, a domestic Swedish authentication method. Decoupled approach", 
            "name": "BankID p\u00e5 kort"
        }
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 18 MATCH STATE21
POST https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/authorisations
Accept: application/json
Content-Type: application/json

{
    "authenticationMethodId": "mobiltbankid"
}

RESPONSE 18 SET STATE22
201
Date: Tue, 02 Mar 2021 10:08:15 GMT
Date: Tue, 02 Mar 2021 10:08:15 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "self": {
            "href": "/signing-baskets/2820e2f2-7740-41ae-888c-8b744805604e/authorisations/83bb7108-b5fd-4a52-9f6b-b96ed39e0b07"
        }
    }, 
    "authorisationId": "83bb7108-b5fd-4a52-9f6b-b96ed39e0b07", 
    "basketId": "2820e2f2-7740-41ae-888c-8b744805604e", 
    "chosenScaMethod": {
        "authenticationMethodId": "mobiltbankid", 
        "authenticationType": "CHIP_OTP", 
        "explanation": "SCA using decoupled approach", 
        "name": "Mobilt BankID"
    }, 
    "paymentIds": [
        "STOHYD01210302110813163757000001"
    ], 
    "scaStatus": "scaMethodSelected"
}

REQUEST 19 MATCH STATE22
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 19 SET STATE23
200
Date: Tue, 02 Mar 2021 10:08:15 GMT
Date: Tue, 02 Mar 2021 10:08:16 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "psuMessage": "Signera med mobilt BankID", 
    "scaStatus": "started", 
    "tppMessages": [
        "Ask the customer to sign for the payment with mobile BankId application"
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 20 MATCH STATE23
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 20 SET STATE24
200
Date: Tue, 02 Mar 2021 10:08:17 GMT
Date: Tue, 02 Mar 2021 10:08:18 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "psuMessage": "Signera med mobilt BankID", 
    "scaStatus": "started", 
    "tppMessages": [
        "Ask the customer to sign for the payment with mobile BankId application"
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 21 MATCH STATE24
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 21 SET STATE25
200
Date: Tue, 02 Mar 2021 10:08:20 GMT
Date: Tue, 02 Mar 2021 10:08:20 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "psuMessage": "Signera med mobilt BankID", 
    "scaStatus": "started", 
    "tppMessages": [
        "Ask the customer to sign for the payment with mobile BankId application"
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 22 MATCH STATE25
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 22 SET STATE26
200
Date: Tue, 02 Mar 2021 10:08:22 GMT
Date: Tue, 02 Mar 2021 10:08:23 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "psuMessage": "Signera med mobilt BankID", 
    "scaStatus": "started", 
    "tppMessages": [
        "Ask the customer to sign for the payment with mobile BankId application"
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 23 MATCH STATE26
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 23 SET STATE27
200
Date: Tue, 02 Mar 2021 10:08:25 GMT
Date: Tue, 02 Mar 2021 10:08:26 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "psuMessage": "Signera med mobilt BankID", 
    "scaStatus": "started", 
    "tppMessages": [
        "Ask the customer to sign for the payment with mobile BankId application"
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 24 MATCH STATE27
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 24 SET STATE28
200
Date: Tue, 02 Mar 2021 10:08:28 GMT
Date: Tue, 02 Mar 2021 10:08:28 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "psuMessage": "Signera med mobilt BankID", 
    "scaStatus": "started", 
    "tppMessages": [
        "Ask the customer to sign for the payment with mobile BankId application"
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 25 MATCH STATE28
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 25 SET STATE29
200
Date: Tue, 02 Mar 2021 10:08:30 GMT
Date: Tue, 02 Mar 2021 10:08:31 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "psuMessage": "Signera med mobilt BankID", 
    "scaStatus": "started", 
    "tppMessages": [
        "Ask the customer to sign for the payment with mobile BankId application"
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 26 MATCH STATE29
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 26 SET STATE30
200
Date: Tue, 02 Mar 2021 10:08:33 GMT
Date: Tue, 02 Mar 2021 10:08:32 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "startAuthorisationWithAuthenticationMethodSelection": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/authorisations"
        }, 
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "scaMethods": [
        {
            "authenticationMethodId": "mobiltbankid", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using decoupled approach", 
            "name": "Mobilt BankID"
        }, 
        {
            "authenticationMethodId": "digipass", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using Redirect to SEB pages", 
            "name": "Digipass"
        }, 
        {
            "authenticationMethodId": "bankIdOnCardDecoupled", 
            "authenticationType": "CHIP_OTP", 
            "explanation": "SCA using BankId on card, a domestic Swedish authentication method. Decoupled approach", 
            "name": "BankID p\u00e5 kort"
        }
    ], 
    "transactionStatus": "RCVD"
}

REQUEST 27 MATCH STATE30
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 27 SET STATE31
200
Date: Tue, 02 Mar 2021 10:08:35 GMT
Date: Tue, 02 Mar 2021 10:08:36 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "chosenScaMethod": {
        "authenticationMethodId": "mobiltbankid", 
        "authenticationType": "CHIP_OTP", 
        "explanation": "SCA using decoupled approach", 
        "name": "Mobilt BankID"
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "transactionStatus": "ACTC"
}

REQUEST 28 MATCH STATE31
GET https://tpp-api.sebgroup.com/tpp/pis/v6/identified2/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status
Accept: application/json
Content-Type: application/json

RESPONSE 28 SET STATE32
200
Date: Tue, 02 Mar 2021 10:08:36 GMT
Date: Tue, 02 Mar 2021 10:08:36 GMT
Content-Type: application/json
x-seb-csrf: CSRF_TOKEN

{
    "_links": {
        "status": {
            "href": "/payments/swedish-domestic-private-credit-transfers/STOHYD01210302110813163757000001/status"
        }
    }, 
    "chosenScaMethod": {
        "authenticationMethodId": "mobiltbankid", 
        "authenticationType": "CHIP_OTP", 
        "explanation": "SCA using decoupled approach", 
        "name": "Mobilt BankID"
    }, 
    "paymentId": "STOHYD01210302110813163757000001", 
    "transactionStatus": "ACTC"
}
